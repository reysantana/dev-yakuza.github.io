<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="https://jekyllrb.com/" version="3.8.5">Jekyll</generator><link href="https://dev-yakuza.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://dev-yakuza.github.io/" rel="alternate" type="text/html"/><updated>2020-04-12T13:52:04+09:00</updated><id>https://dev-yakuza.github.io/feed.xml</id><title type="html">Dreams the art through programming</title><subtitle>『Programming Artist ヤクザ』</subtitle><author><name>dev.yakuza@gmail.com</name></author><entry xml:lang="ja"><title type="html">react-native-image-picker</title><link href="https://dev-yakuza.github.io/react-native/react-native-image-picker/" rel="alternate" type="text/html" title="react-native-image-picker"/><published>2020-04-05T00:00:00+09:00</published><updated>2020-04-09T20:22:23+09:00</updated><id>https://dev-yakuza.github.io/react-native/react-native-image-picker-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/react-native/react-native-image-picker/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;section&quot;&gt;目次&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#概要&quot;&gt;概要&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#react-native-image-pickerのインストール&quot;&gt;react-native-image-pickerのインストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#権限の設定&quot;&gt;権限の設定&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#iosの権限設定&quot;&gt;iOSの権限設定&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#アンドロイドの権限設定&quot;&gt;アンドロイドの権限設定&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#使い方&quot;&gt;使い方&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#オプション&quot;&gt;オプション&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#response結果&quot;&gt;Response結果&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#注意事項&quot;&gt;注意事項&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#react-native-image-pickerの例題&quot;&gt;react-native-image-pickerの例題&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#完了&quot;&gt;完了&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;下記のようにReact Nativeでカメラを使って写真を取ったり、カメラロールから保存された写真にアクセスすることができます。&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th style=&quot;width:50%&quot;&gt;iOS&lt;/th&gt; &lt;th style=&quot;width:50%&quot;&gt;Android&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt; &lt;img src=&quot;/assets/images/category/react-native/2020/react-native-image-picker/ios-image.jpg&quot; alt=&quot;react-native-image-picker on iOS&quot; /&gt; &lt;/td&gt; &lt;td&gt; &lt;img src=&quot;/assets/images/category/react-native/2020/react-native-image-picker/android-image.png&quot; alt=&quot;react-native-image-picker on Android&quot; /&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;p&gt;[写真: react-native-image-pickerの公式サイト]&lt;/p&gt; &lt;p&gt;このような機能を実現するため、&lt;code class=&quot;highlighter-rouge&quot;&gt;react-native-image-picker&lt;/code&gt;のライブラリを使う方法について説明します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;公式サイト: &lt;a href=&quot;https://github.com/react-native-community/react-native-image-picker&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;react-native-image-picker&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ここで紹介する内容はGithubでソースコードを確認することができます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Github: &lt;a href=&quot;https://github.com/dev-yakuza/react-native-image-picker-example&quot; target=&quot;_blank&quot;&gt;react-native-image-picker-example&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ここで紹介する例題ソースコードは下記の内容が適用された状態です。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/typescript/&quot; target=&quot;_blank&quot;&gt;typescript&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/eslint-prettier-husky-lint-staged/&quot; target=&quot;_blank&quot;&gt;ESLint, Prettier, Husky, lint-staged&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/styled-components/&quot; target=&quot;_blank&quot;&gt;styled-components&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/root-import/&quot; target=&quot;_blank&quot;&gt;root-import&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;react-native-image-pickerのインストール&quot;&gt;react-native-image-pickerのインストール&lt;/h2&gt; &lt;p&gt;下記のコマンドを使ってreact-native-image-pickerをインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--save&lt;/span&gt; react-native-image-picker &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;iOSではreact-native-image-pickerを使うため下記のコマンドを実行します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;ios pod &lt;span class=&quot;nb&quot;&gt;install cd&lt;/span&gt; .. &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;権限の設定&quot;&gt;権限の設定&lt;/h2&gt; &lt;p&gt;次は、react-native-image-pickerを使って写真の機能を実現するためには権限(Permission)が必要です。&lt;/p&gt; &lt;h3 id=&quot;iosの権限設定&quot;&gt;iOSの権限設定&lt;/h3&gt; &lt;p&gt;iOSでreact-native-image-pickerを使うためには&lt;code class=&quot;highlighter-rouge&quot;&gt;ios/[project name]/Info.plist&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plist&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;version=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1.0&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;dict&amp;gt;&lt;/span&gt; ... &lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;NSPhotoLibraryUsageDescription&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;$(PRODUCT_NAME) would like access to your photo gallery&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;NSCameraUsageDescription&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;$(PRODUCT_NAME) would like to use your camera&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;NSPhotoLibraryAddUsageDescription&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;$(PRODUCT_NAME) would like to save photos to your photo gallery&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;NSMicrophoneUsageDescription&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;$(PRODUCT_NAME) would like to use your microphone (for videos)&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dict&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plist&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;アンドロイドの権限設定&quot;&gt;アンドロイドの権限設定&lt;/h3&gt; &lt;p&gt;アンドロイドでreact-native-image-pickerを使うためには&lt;code class=&quot;highlighter-rouge&quot;&gt;android/app/main/AndroidManifest.xml&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;manifest&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:android=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://schemas.android.com/apk/res/android&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;package=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;com.reactnativeimagepickerexample&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; ... &lt;span class=&quot;nt&quot;&gt;&amp;lt;uses-permission&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;android:name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android.permission.CAMERA&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;uses-permission&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;android:name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; ... &lt;span class=&quot;nt&quot;&gt;&amp;lt;/manifest&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;使い方&quot;&gt;使い方&lt;/h2&gt; &lt;p&gt;react-native-image-pickerを使うためにはまず、下記のようにライブラリをインポートします。&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ImagePicker&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react-native-image-picker&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして、下記のように使うことができます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;写真とカメラロール、カスタムボタンを表示&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Load Photo&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;customButtons&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;button_id_1&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;CustomButton 1&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;button_id_2&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;CustomButton 2&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;storageOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;skipBackup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;images&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ImagePicker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;showImagePicker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Response = &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;didCancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;User cancelled image picker&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;ImagePicker Error: &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;customButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;User tapped custom button: &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;customButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;customButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// You can also display the image using data:&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// const source = { uri: 'data:image/jpeg;base64,' + response.data };&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setImageSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;カメラ表示&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;storageOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;skipBackup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;images&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ImagePicker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;launchCamera&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;LaunchCamera Error: &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setImageSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;カメラロール表示&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;storageOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;skipBackup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;images&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ImagePicker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;launchImageLibrary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;LaunchImageLibrary Error: &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setImageSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt; &lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;オプション&quot;&gt;オプション&lt;/h2&gt; &lt;p&gt;react-native-image-pickerは下記のようなオプションを使うことができます。&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;オプジョン&lt;/th&gt; &lt;th&gt;必須&lt;/th&gt; &lt;th&gt;タイプ&lt;/th&gt; &lt;th&gt;iOS&lt;/th&gt; &lt;th&gt;アンドロイド&lt;/th&gt; &lt;th&gt;説明&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;title&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;ImagePickerの上に表示されるタイトル&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;cancelButtonTitle&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;ImagePickerのチャンセルボタンのタイトル&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;takePhotoButtonTitle&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;ImagePickerの写真ボタンのタイトル&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;chooseFromLibraryButtonTitle&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;ImagePickerのカメラロール表示ボタンのタイトル&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;chooseWhichLibraryTitle&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;アンドロイドでカメラアプリが複数インストールされた場合、表示されるダイアログのタイトル&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;customButtons&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;[{name?: string; title?: string;}]&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;カメラボタンとカメラロールボタン以外にカスタムボタンを追加するとき使う&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;cameraType&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;‘front’, ‘back’&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;前のカメラを使うか、後ろのカメラを使うか決める&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;mediaType&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;‘photo’, ‘video’, ‘mixed’&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;写真のみ表示、ビデオのみ表示、写真とビデオを表示&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;maxWidth&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;number&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;最大広さ (Photo only)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;maxHeight&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;number&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;最大高さ (Photo only)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;quality&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;number&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;写真のクオリティ (0 to 1, photos only)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;videoQuality&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;‘low’, ‘medium’, ‘high’&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;ビデオのクオリティ (iOS: low, medium, high / Android: low, high)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;durationLimit&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;number&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;最大ビデオの録画時間 (second)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;rotation&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;number&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;写真の回転角度 (Photo only, 0 to 360)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;allowsEditing&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;boolean&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;写真をResizeするかどうか&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;noData&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;boolean&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;写真選択の結果でbase64のデータを取得するかどうか。大きい写真の場合、trueで設定すると性能をあげることができます。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;tintColor&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;number, string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;ImagePickerのボタンのタキストの色&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;storageOptions.skipBackup&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;boolean&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;trueを設定すると、iCloudへバックアップをしない。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;storageOptions.path&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;イメージの保存場所を設定 (iOS: Documents/[path]/, Android: Pictures/[path]/)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;storageOptions.waitUntilSaved&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;boolean&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;trueで設定すると、写真/ビデオがカメラロールへ保存されるまで待ってる。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;storageOptions.privateDirectory&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;boolean&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;trueで設定すると写真/ビデオはAndroid/data/your_package/files/Picturesへ保存される。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;permissionDenied.title&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;権限の設定ダイアログのタイトルを設定する。 (default: Permission denied)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;permissionDenied.text&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;権限の設定ダイアログのメッセージ (default: To be able to take pictures with your camera and choose images from your library.)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;permissionDenied.reTryTitle&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;再試しのボタンのタイトル (default: re-try)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;permissionDenied.okTitle&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;確認ボタンのタイトル (default: I’m sure)&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;response結果&quot;&gt;Response結果&lt;/h2&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;オプション&lt;/th&gt; &lt;th&gt;必須&lt;/th&gt; &lt;th&gt;タイプ&lt;/th&gt; &lt;th&gt;iOS&lt;/th&gt; &lt;th&gt;アンドロイド&lt;/th&gt; &lt;th&gt;説明&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;customButton&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;カスタムボタンを選択した時、カスタムボタンのnameが帰ってくる&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;didCancel&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;boolean&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;ImagePickerでCancelボタンをおしたかどうか&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;error&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;Errorが発生した時のErrorメッセージ&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;data&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;イメージのBase64文字列 (Photo only)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;uri&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;写真/ビデオのローカルファイルURI&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;origURL&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;カメラロールの写真/ビデオのURL&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;isVertical&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;boolean&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;写真/ビデオがVerticalかどうか&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;width&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;number&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;写真の広さ (Photo only)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;height&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;number&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;写真の高さ (Photo only)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;fileSize&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;number&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;ファイルのサイズ (Photo only)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;type&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;ファイルのタイプ (Photo only)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;fileName&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;ファイルの名前 (iOS: Photo, Video / Android: Photo)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;path&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;-&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;ファイルパス&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;latitude&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;number&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;写真/ビデオの緯度 (情報がある場合)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;longitude&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;number&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;写真/ビデオの軽度 (情報がある場合)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;timestamp&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;○&lt;/td&gt; &lt;td&gt;写真/ビデオのMetadata Timestamp (ISO8601 UTC format)&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;注意事項&quot;&gt;注意事項&lt;/h2&gt; &lt;p&gt;iOSのシミュレータ、アンドロイドのエミュレータではカメラで写真を取る機能はテストできません。この機能をテストしたい方はデバイスでテストしてください。&lt;/p&gt; &lt;h2 id=&quot;react-native-image-pickerの例題&quot;&gt;react-native-image-pickerの例題&lt;/h2&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/react-native-image-picker/react-native-image-picker-example.png&quot; alt=&quot;react-native-image-picker-example&quot; /&gt;&lt;/p&gt; &lt;p&gt;react-native-image-pickerを使った例題を作ってみました。下記のリンクを使って確認してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Github: &lt;a href=&quot;https://github.com/dev-yakuza/react-native-image-picker-example&quot; target=&quot;_blank&quot;&gt;react-native-image-picker-example&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これで&lt;code class=&quot;highlighter-rouge&quot;&gt;react-native-image-picker&lt;/code&gt;を使う方法について確認しました。このブログポストがReact Nativeで写真/カメラロール機能を実装する方に少しでも役に立って欲しいです。&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/react-native/2020/react-native-image-picker/background.jpg"/></entry><entry xml:lang="ja"><title type="html">RailsでDBを使う方法</title><link href="https://dev-yakuza.github.io/ruby-on-rails/database/" rel="alternate" type="text/html" title="RailsでDBを使う方法"/><published>2020-03-10T00:00:00+09:00</published><updated>2020-03-23T09:48:27+09:00</updated><id>https://dev-yakuza.github.io/ruby-on-rails/database-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/ruby-on-rails/database/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;section&quot;&gt;目次&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#概要&quot;&gt;概要&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#db設定&quot;&gt;DB設定&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#mysql2&quot;&gt;mysql2&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#modelを作る&quot;&gt;Modelを作る&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#テーブル生成&quot;&gt;テーブル生成&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#crud&quot;&gt;CRUD&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#create&quot;&gt;Create&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#read&quot;&gt;Read&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#update&quot;&gt;Update&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#delete&quot;&gt;Delete&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#完了&quot;&gt;完了&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#参考&quot;&gt;参考&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;このブログポストではRailsを使って本格的データを使ってみようかと思います。本格的データを使うためDBを設定して、DBテーブ路を生成する予定です。 このように生成されたDBへRailsを使ってCRUD(Create Read Update Delete)をして、Railsでデータを使う方法を理解してみようかと思います。&lt;/p&gt; &lt;p&gt;このブログポストはシリーズで作成されてます。詳しく内容は下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;MacでRuby on Railsを始める&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;Railsで作ったプロジェクトのフォルダ構造&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/create-page/&quot; target=&quot;_blank&quot;&gt;Ruby on Railsを使って新しウェブページを作る&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/data-in-controller-view-route/&quot; target=&quot;_blank&quot;&gt;ControllerとView、Routeとのデータ交換&lt;/a&gt;&lt;/li&gt; &lt;li&gt;RailsでDBを使う方法&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ここで使ったソースコードはGithubで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/dev-yakuza/study-rails&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Github ソースコード&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;db設定&quot;&gt;DB設定&lt;/h2&gt; &lt;p&gt;まず、DBを使うためにはRailsへDBに関する設定をする必要があります。ここにはmysqlを設定する方法だけ紹介します。 mysqlは既にローカルにインストールされたと思って進めます。&lt;/p&gt; &lt;p&gt;RailsでDBの設定は&lt;code class=&quot;highlighter-rouge&quot;&gt;config/database.yml&lt;/code&gt;ファイルが担当してます。&lt;code class=&quot;highlighter-rouge&quot;&gt;config/database.yml&lt;/code&gt;ファイルを開いたら、下記のような内容が確認されます。&lt;/p&gt; &lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;&amp;amp;default&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;adapter&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;sqlite3&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;pool&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;lt;%= ENV.fetch(&quot;RAILS_MAX_THREADS&quot;) { 5 } %&amp;gt;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5000&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;development&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;*default&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;database&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;db/development.sqlite3&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;*default&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;database&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;db/test.sqlite3&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;production&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;*default&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;database&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;db/production.sqlite3&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Railsは基本的sqlite3を設定しております。ここではmysqlを使う予定なので、上の設定を下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;&amp;amp;default&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;adapter&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mysql2&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;encoding&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;utf8&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;database&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;study_rails&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;pool&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;root&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/tmp/mysql.sock&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;development&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;*default&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;*default&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;production&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;*default&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上の設定でdatabase, username, passwordを自分のローカル環境に合わせて修正します。&lt;/p&gt; &lt;p&gt;上の設定では全ての設定を&lt;code class=&quot;highlighter-rouge&quot;&gt;default&lt;/code&gt;へ作成して、他の環境ではdefaultにある内容を参考するようにしました。特定な環境に必要な情報を修正したい場合は、下記のように修正することができます。&lt;/p&gt; &lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;production&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;*default&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;root&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;XXXX&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のように修正すると、production環境時だけ、ここに書いてるusernameとpasswordを使うようになります。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;mysql2&quot;&gt;mysql2&lt;/h2&gt; &lt;p&gt;RailsでMysqlに接続するためには&lt;code class=&quot;highlighter-rouge&quot;&gt;mysql2&lt;/code&gt;と言うgemが必要です。下記のコマンドで&lt;code class=&quot;highlighter-rouge&quot;&gt;mysql2&lt;/code&gt;をインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle add mysql2 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;インストールが完了されたら、下記のコマンドでデータベースを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake db:create &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;もし、下記のようなエラーメッセージが表示されて、データベースが生成されない場合、&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;warning: Using the last argument as keyword parameters is deprecated&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; maybe &lt;span class=&quot;k&quot;&gt;**&lt;/span&gt; should be added to the call The called method &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;initialize&lt;span class=&quot;s1&quot;&gt;' is defined here [BUG] Segmentation fault at 0x0000000000000000 ... &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のコマンドを使ってmysql2をインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gem &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;mysql2 &lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--with-ldflags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-L&lt;/span&gt;/usr/local/opt/openssl/lib &lt;span class=&quot;nt&quot;&gt;--with-cppflags&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-I&lt;/span&gt;/usr/local/opt/openssl/include &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして、まだ、下記のコマンドを使ってデータベースを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake db:create &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;問題なくデータベースが生成されたら下記のようなメッセージを確認することができます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Created database &lt;span class=&quot;s1&quot;&gt;'study_rails'&lt;/span&gt; Database &lt;span class=&quot;s1&quot;&gt;'study_rails'&lt;/span&gt; already exists &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;modelを作る&quot;&gt;Modelを作る&lt;/h2&gt; &lt;p&gt;データベースを作りましたので、データを保存するテーブルを作ってみましょう。Railsを使ってテーブルを作るためには、まず、Modelを生成する必要があります。&lt;/p&gt; &lt;p&gt;下記のコマンドを使ってModelを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# bundle exec rails generate model post&lt;/span&gt; bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rails g model post &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;このようにModelを生成すると、下記のようなファイルが生成されることが確認できます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├── app │   ├── models │   │   ├── post.rb ├── db │   ├── migrate │   │   ├── 20200315053129_create_posts.rb ├── &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; │   ├── fixtures │   │   ├── posts.yml │   ├── models │   │   ├── post_test.rb &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;app/models/post.rb: 実際テーブルと連結されるModel&lt;/li&gt; &lt;li&gt;db/migrate/20200315053129_create_posts.rb: テーブルを生成するためのmigratoinファイル&lt;/li&gt; &lt;li&gt;test/fixtures/posts.yml: テストをするためDummyデータ&lt;/li&gt; &lt;li&gt;test/models/post_test.rb: Modelのユニットテストをするためのファイル&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;テーブル生成&quot;&gt;テーブル生成&lt;/h2&gt; &lt;p&gt;実際データをデータベースへ保存するためテーブルを生成してみましょう。データベースへテーブルを生成するため、Migrationファイルを修正する必要があります。&lt;/p&gt; &lt;p&gt;postsテーブルを生成するため、&lt;code class=&quot;highlighter-rouge&quot;&gt;db/migrate/20200315053129_create_posts.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CreatePosts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Migration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;6.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;change&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;create_table&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:posts&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:title&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:content&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;timestamps&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;このpostsテーブルは基本的Stringタイプの&lt;code class=&quot;highlighter-rouge&quot;&gt;title&lt;/code&gt;と長い文字を保存するためTextタイプの&lt;code class=&quot;highlighter-rouge&quot;&gt;content&lt;/code&gt;を持ってます。また、&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake db:migrate &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;コマンドを実行するとテーブルが生成されて&lt;code class=&quot;highlighter-rouge&quot;&gt;db/schema.rb&lt;/code&gt;ファイルが生成されることが確認できます。&lt;code class=&quot;highlighter-rouge&quot;&gt;db/schema.rb&lt;/code&gt;ファイルを開いてみると下記のような内容が確認できます。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Schema&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;define&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;version: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2020_03_15_053129&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;create_table&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;posts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;options: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ENGINE=InnoDB DEFAULT CHARSET=utf8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;force: :cascade&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;title&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;content&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;created_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;precision: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;null: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;updated_at&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;precision: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;null: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;また、データベースツールを使って実際テーブルが生成されたか、確認すると、下記のようにテーブルができてることが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/database/result-create-table.png&quot; alt=&quot;Ruby on Rails テーブル生成結果&quot; /&gt;&lt;/p&gt; &lt;p&gt;Migrationを使ってテーブル生成した後、下記のコマンドでテーブル生成前に戻ることができます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake db:rollback &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;crud&quot;&gt;CRUD&lt;/h2&gt; &lt;p&gt;今から上で作ったテーブルへRailsを使って&lt;code class=&quot;highlighter-rouge&quot;&gt;CRUD(Create Read Update Delete)&lt;/code&gt;をしてみます。&lt;/p&gt; &lt;h3 id=&quot;create&quot;&gt;Create&lt;/h3&gt; &lt;p&gt;データを生成するため、まず&lt;code class=&quot;highlighter-rouge&quot;&gt;app/controllers/home_controller.rb&lt;/code&gt;ファイルを開いて、下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ApplicationController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ユーザから入力して貰う画面を表示する&lt;code class=&quot;highlighter-rouge&quot;&gt;form&lt;/code&gt;を生成しました。当該&lt;code class=&quot;highlighter-rouge&quot;&gt;form&lt;/code&gt;のActionに関するViewを作成するため、&lt;code class=&quot;highlighter-rouge&quot;&gt;app/views/home/form.erb&lt;/code&gt;ファイルを生成して下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/list&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Go back&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;br/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;form&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;action=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/create&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hidden&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;authenticity_token&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;%= form_authenticity_token %&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;label&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;for=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;title:&lt;span class=&quot;nt&quot;&gt;&amp;lt;/label&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;title&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;label&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;for=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;content:&lt;span class=&quot;nt&quot;&gt;&amp;lt;/label&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;content&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;submit&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/form&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ユーザが&lt;code class=&quot;highlighter-rouge&quot;&gt;submit&lt;/code&gt;ボタンを押すと、&lt;code class=&quot;highlighter-rouge&quot;&gt;POST&lt;/code&gt;で&lt;code class=&quot;highlighter-rouge&quot;&gt;/create&lt;/code&gt;と言うURLへデータを送るように作りました。&lt;/p&gt; &lt;p&gt;そしてRouteへ当該URLを登録するため、&lt;code class=&quot;highlighter-rouge&quot;&gt;config/routes.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/form'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'home#form'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして確認のため、下記のコマンドを実行してRailsサーバを起動します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rails s &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;実行が終わったら、&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:3000/form&lt;/code&gt;へ移動したら、下記のような画面をみることができます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/database/form-page.png&quot; alt=&quot;Ruby on Rails, CRUD 데이터 생성 form&quot; /&gt;&lt;/p&gt; &lt;p&gt;今から実際データを貰って処理する部分を作ってみましょう。&lt;code class=&quot;highlighter-rouge&quot;&gt;app/controllers/home_controller.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ApplicationController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/list'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上の内容を詳しくみると、&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;post = Post.new&lt;/code&gt;: 上で作ったPOSTモデルを使って新データを生成する準備をします。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;post.title = params[:title]&lt;/code&gt;: 新く生成するPOSTデータのtitleへユーザが入力したtitleを入れます。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;post.content = params[:content]&lt;/code&gt;: 新く生成するPOSTデータのcontentへユーザが入力したcontentデータを入力します。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;post.save&lt;/code&gt;: 最後に当該データを保存することで、データベースへデータを生成(create)します。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;redirect_to '/list'&lt;/code&gt;: 生成が終わったら、&lt;code class=&quot;highlighter-rouge&quot;&gt;/list&lt;/code&gt;と言うURLへRedirectさせます。&lt;/li&gt; &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;def list&lt;/code&gt;: 一旦Redirectする時、エラーが出ないようにするため、空のActionを追加します。今後、このActionへデータを表示する処理を入れる予定です。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;上の内容をみるとわかりますが、&lt;code class=&quot;highlighter-rouge&quot;&gt;create&lt;/code&gt;アクションはredirectさせますので、Viewが要らないです。しかし、後でデータを表示する&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;アクションはViewが必要なので、&lt;code class=&quot;highlighter-rouge&quot;&gt;app/views/home/list.erb&lt;/code&gt;ファイルを生成しておきます。&lt;/p&gt; &lt;p&gt;このように追加したActionを使うため&lt;code class=&quot;highlighter-rouge&quot;&gt;config/routes.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/create'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'home#create'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/list'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'home#list'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:3000/form&lt;/code&gt;へデータを入れてSubmitボタンを押して&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:3000/list&lt;/code&gt;へ移動することが確認できます。また、データベースツールを使ってみると、下記のようにデータがうまく追加されたことが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/database/result-create-data.png&quot; alt=&quot;Ruby on Rails, CRUDデータ生成確認&quot; /&gt;&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;read&quot;&gt;Read&lt;/h3&gt; &lt;p&gt;이제 위에서 생성한 데이터를 읽어와서(Read), 화면에 표시해 보도록 합시다. &lt;code class=&quot;highlighter-rouge&quot;&gt;app/controllers/home_controller.rb&lt;/code&gt; 파일을 열고 아래와 같이 수정합니다.&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ApplicationController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@posts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;all&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上で&lt;code class=&quot;highlighter-rouge&quot;&gt;Post.all&lt;/code&gt;を使ってPostテーブルへ保存した全てのデータを取ってきました。このように取ってきたデータをViewへ伝達するため&lt;code class=&quot;highlighter-rouge&quot;&gt;@posts&lt;/code&gt;と言うインスタンス変数へ保存しました。&lt;/p&gt; &lt;p&gt;このように保存したデータを画面に表示するため、&lt;code class=&quot;highlighter-rouge&quot;&gt;app/views/home/list.erb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;style&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;th&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;td&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;solid&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;black&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/form&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Create New Post&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;table&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;thead&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;tr&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;th&amp;gt;&lt;/span&gt;Title&lt;span class=&quot;nt&quot;&gt;&amp;lt;/th&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;th&amp;gt;&lt;/span&gt;Content&lt;span class=&quot;nt&quot;&gt;&amp;lt;/th&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;th&amp;gt;&lt;/span&gt;Action&lt;span class=&quot;nt&quot;&gt;&amp;lt;/th&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/thead&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;tbody&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;tr&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%=&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/td&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%=&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/td&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&amp;lt;/td&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/tbody&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/table&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ここで重要な部分は&lt;code class=&quot;highlighter-rouge&quot;&gt;@posts&lt;/code&gt;のインスタンス変数を通じて持ってきたデータを下記のコードを使ってループしながら、1つづつ&lt;code class=&quot;highlighter-rouge&quot;&gt;post&lt;/code&gt;の変数へ入れます。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sx&quot;&gt;% @posts.each &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%&amp;gt; ... &amp;lt;% end %&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;このように割り当てられた&lt;code class=&quot;highlighter-rouge&quot;&gt;post&lt;/code&gt;変数からtitleとcontentを取ってきて画面に表示します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%=&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/td&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%=&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/td&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;このように作成して、また、&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:3000/list&lt;/code&gt;へ接続してみると、下記のようにデータが表示されることが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/database/display-data.png&quot; alt=&quot;Ruby on Rails データベースから取ってきたデータを画面へ表示&quot; /&gt;&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;update&quot;&gt;Update&lt;/h3&gt; &lt;p&gt;今から上で生成したデータを修正(Update)する方法について説明します。&lt;code class=&quot;highlighter-rouge&quot;&gt;app/controllers/home_controller.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ApplicationController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;modify&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@post&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上で&lt;code class=&quot;highlighter-rouge&quot;&gt;modify&lt;/code&gt;はユーザへ修正するFormを提供するためのアクション(Action)です。ユーザから修正したいデータの&lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt;を受けて、受けて貰ったidで必要なデータを探して(&lt;code class=&quot;highlighter-rouge&quot;&gt;Post.find&lt;/code&gt;)、探したデータをViewへ伝達するためインスタンス変数(&lt;code class=&quot;highlighter-rouge&quot;&gt;@post&lt;/code&gt;)へ保存しました。&lt;/p&gt; &lt;p&gt;次は、追加されたデータを修正するためのFormをユーザへ提供するため&lt;code class=&quot;highlighter-rouge&quot;&gt;app/views/home/modify.erb&lt;/code&gt;ファイルを生成して下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/list&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Go back&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;br/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;form&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;action=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/update/&amp;lt;%= @post.id %&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hidden&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;authenticity_token&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;%= form_authenticity_token %&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;label&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;for=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;title:&lt;span class=&quot;nt&quot;&gt;&amp;lt;/label&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;title&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;%= @post.title %&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;label&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;for=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;content:&lt;span class=&quot;nt&quot;&gt;&amp;lt;/label&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;content&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;%= @post.content %&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;submit&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/form&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;データを生成するため作った&lt;code class=&quot;highlighter-rouge&quot;&gt;app/views/home/form.erb&lt;/code&gt;と似てます。違うところはInputタグの&lt;code class=&quot;highlighter-rouge&quot;&gt;value&lt;/code&gt;へControllerから伝達して貰ったデータを表示してます。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;title&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;%= @post.title %&amp;gt;%&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;content&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&amp;lt;%= @post.content %&amp;gt;%&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;このように生成したページを表示するためRouteを設定してみましょう。&lt;code class=&quot;highlighter-rouge&quot;&gt;config/routes.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/modify/:id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'home#modify'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;データを修正するためのViewである&lt;code class=&quot;highlighter-rouge&quot;&gt;modify&lt;/code&gt;はURLへパラメーターを伝達する方法を使ってます。 このようにURLで&lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt;をもらって、Controllerは受けったidをデータを探して、画面へ表示する予定です。&lt;/p&gt; &lt;p&gt;次は&lt;code class=&quot;highlighter-rouge&quot;&gt;modify&lt;/code&gt;ページを開くためのリンクを追加するため&lt;code class=&quot;highlighter-rouge&quot;&gt;app/views/home/list.erb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;... &lt;span class=&quot;nt&quot;&gt;&amp;lt;table&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;thead&amp;gt;&lt;/span&gt; ... &lt;span class=&quot;nt&quot;&gt;&amp;lt;/thead&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;tbody&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;tr&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%=&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/td&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%=&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/td&amp;gt;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- add this line --&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/modify/&amp;lt;%= post.id %&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;modify&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/tbody&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/table&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;このように作成して、また&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:3000/list&lt;/code&gt;へ接続してみると、下記のようにデータが上手く表示されることが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/database/add-modify-link.png&quot; alt=&quot;Ruby on Railsデータを修正するためのリンク追加&quot; /&gt;&lt;/p&gt; &lt;p&gt;ここで&lt;code class=&quot;highlighter-rouge&quot;&gt;modify&lt;/code&gt;リンクを押したら、下記のような画面を確認することができます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/database/modify-page.png&quot; alt=&quot;Ruby on Railsデータを修正するページ&quot; /&gt;&lt;/p&gt; &lt;p&gt;次はデータを実際更新するアクション(Action)を作ってみましょう。上の&lt;code class=&quot;highlighter-rouge&quot;&gt;modify&lt;/code&gt;ページでsubmitボタンを押すと、&lt;code class=&quot;highlighter-rouge&quot;&gt;/update/:id&lt;/code&gt;へ遷移するように作りました。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/list&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Go back&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;br/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;form&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;action=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/update/&amp;lt;%= @post.id %&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; ... &lt;span class=&quot;nt&quot;&gt;&amp;lt;/form&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;このリンクに該当するアクションを作るため、&lt;code class=&quot;highlighter-rouge&quot;&gt;app/controllers/home_controller.rb&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ApplicationController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;update&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/list'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;パラメーターでもらった&lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt;で保存したデータを取ってきて、ユーザが入力した&lt;code class=&quot;highlighter-rouge&quot;&gt;title&lt;/code&gt;と&lt;code class=&quot;highlighter-rouge&quot;&gt;content&lt;/code&gt;データで保存したデータを更新した後、&lt;code class=&quot;highlighter-rouge&quot;&gt;post.save&lt;/code&gt;を使ってデータを更新しました。 最後にデータを更新したら、&lt;code class=&quot;highlighter-rouge&quot;&gt;/list&lt;/code&gt;ページへRedirectするように設定しました。&lt;/p&gt; &lt;p&gt;次はこのアクションを使えるようにするためRouteへURLを追加してみましょう。&lt;code class=&quot;highlighter-rouge&quot;&gt;config/routes.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/update/:id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'home#update'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;URLを通じて&lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt;パラメーターを受ける予定で、ユーザが入力したデータはPOST方式で貰う予定です。&lt;/p&gt; &lt;p&gt;この後、データの修正ページへ移動した後、&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/database/add-modify-link.png&quot; alt=&quot;Ruby on Railsデータを修正するためリンク追加&quot; /&gt;&lt;/p&gt; &lt;p&gt;下記のように既存データとは違う内容を入力してみます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/database/update-data.png&quot; alt=&quot;Ruby on Rails データ修正ページ - データ修正&quot; /&gt;&lt;/p&gt; &lt;p&gt;そして&lt;code class=&quot;highlighter-rouge&quot;&gt;Submit&lt;/code&gt;ボタンを押すと下記のように、データが上手く更新されたことが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/database/update-data-result.png&quot; alt=&quot;Ruby on Railsデータリストページ - データ修正結果&quot; /&gt;&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;delete&quot;&gt;Delete&lt;/h3&gt; &lt;p&gt;次はCRUDの最後であるデータ削除(Delete)に関して説明します。データを削除するアクションを追加するため&lt;code class=&quot;highlighter-rouge&quot;&gt;app/controllers/home_controller.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ApplicationController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;destroy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redirect_to&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/list'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;パラメーターでもらった&lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt;でPostモデルのデータを削除(&lt;code class=&quot;highlighter-rouge&quot;&gt;Post.destroy&lt;/code&gt;)して&lt;code class=&quot;highlighter-rouge&quot;&gt;/list&lt;/code&gt;ページへRedirectするようにしました。&lt;/p&gt; &lt;p&gt;次はこのアクションをURLへ追加するため&lt;code class=&quot;highlighter-rouge&quot;&gt;config/routes.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/delete/:id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'home#delete'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そしてこのページを呼び出せるように&lt;code class=&quot;highlighter-rouge&quot;&gt;list&lt;/code&gt;ページを修正します。&lt;code class=&quot;highlighter-rouge&quot;&gt;app/views/home/list.erb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;... &lt;span class=&quot;nt&quot;&gt;&amp;lt;table&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;thead&amp;gt;&lt;/span&gt; ... &lt;span class=&quot;nt&quot;&gt;&amp;lt;/thead&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;tbody&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;posts&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;tr&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%=&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/td&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%=&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/td&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/modify/&amp;lt;%= post.id %&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;modify&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;br/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/delete/&amp;lt;%= post.id %&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;delete&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;br/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/tbody&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/table&amp;gt;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;また&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:3000/list&lt;/code&gt;へ接続したら、下記のように&lt;code class=&quot;highlighter-rouge&quot;&gt;delete&lt;/code&gt;リンクが追加されたことが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/database/delete-link.png&quot; alt=&quot;Ruby on Railsデータリストページ - 削除リンク&quot; /&gt;&lt;/p&gt; &lt;p&gt;そしたら、&lt;code class=&quot;highlighter-rouge&quot;&gt;delete&lt;/code&gt;リンクを押してみましょう。&lt;code class=&quot;highlighter-rouge&quot;&gt;delete&lt;/code&gt;リンクを押すと、保存されたデータが上手く削除されて、下記のようにリストページにもデータが表示されないことが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/database/deleted.png&quot; alt=&quot;Ruby on Railsデータリストページ削除成功&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これで、Ruby on Railsでデータベースを生成してデータをCRUD(Create Read Update Delete)する方法についてみてみました。皆さんはもうRuby on Railsで基本的なウェブサービスを開発する準備ができました。&lt;/p&gt; &lt;p&gt;今後はウェブサービスを作って見ながら、Railsをもっと深く勉強してください。&lt;/p&gt; &lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt; &lt;p&gt;このブログポストはシリーズで作成されてます。詳しく内容は下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;MacでRuby on Railsを始める&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;Railsで作ったプロジェクトのフォルダ構造&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/create-page/&quot; target=&quot;_blank&quot;&gt;Ruby on Railsを使って新しウェブページを作る&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/data-in-controller-view-route/&quot; target=&quot;_blank&quot;&gt;ControllerとView、Routeとのデータ交換&lt;/a&gt;&lt;/li&gt; &lt;li&gt;RailsでDBを使う方法&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ここで使ったソースコードはGithubで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/dev-yakuza/study-rails&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Github ソースコード&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/ruby-on-rails/2020/database/background.jpg"/></entry><entry xml:lang="ja"><title type="html">ControllerとView、Routeとのデータ交換</title><link href="https://dev-yakuza.github.io/ruby-on-rails/data-in-controller-view-route/" rel="alternate" type="text/html" title="ControllerとView、Routeとのデータ交換"/><published>2020-03-09T00:00:00+09:00</published><updated>2020-03-17T12:58:27+09:00</updated><id>https://dev-yakuza.github.io/ruby-on-rails/data-in-controller-view-route-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/ruby-on-rails/data-in-controller-view-route/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;section&quot;&gt;目次&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#概要&quot;&gt;概要&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#変数&quot;&gt;変数&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#controllerからviewへデータ伝達&quot;&gt;ControllerからViewへデータ伝達&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#viewからcontrollerでデータを伝達&quot;&gt;ViewからControllerでデータを伝達&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#get方式&quot;&gt;GET方式&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#post方式&quot;&gt;POST方式&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#完了&quot;&gt;完了&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#参考&quot;&gt;参考&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;Ruby on RailsでControllerとView、そしてRoute間でデータを送る方法についてデータを送る方法について調べてみます。&lt;/p&gt; &lt;p&gt;このブログポストはシリーズで作成されてます。詳しく内容は下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;MacでRuby on Railsを始める&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;Railsで作ったプロジェクトのフォルダ構造&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/create-page/&quot; target=&quot;_blank&quot;&gt;Ruby on Railsを使って新しウェブページを作る&lt;/a&gt;&lt;/li&gt; &lt;li&gt;ControllerとView、Routeとのデータ交換&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/database/&quot; target=&quot;_blank&quot;&gt;RailsでDBを使う方法&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ここで使ったソースコードはGithubで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/dev-yakuza/study-rails&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Github ソースコード&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;変数&quot;&gt;変数&lt;/h2&gt; &lt;p&gt;データのやりとり方法を調べる前に、Rubyの変数について少し確認します。Rubyには下記のような変数たちを使えます。&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;名前&lt;/th&gt; &lt;th&gt;特徴&lt;/th&gt; &lt;th&gt;変数の使い方&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;ローカル変数&lt;/td&gt; &lt;td&gt;- 特定なエアリア（アクション）中のみで使える変数&lt;br /&gt;特定なエアリア（アクション）中だけ使える変数なので、特定なエアリア（アクション）中でしか参照できない。&lt;/td&gt; &lt;td&gt;var = 1&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;インスタンス変数&lt;/td&gt; &lt;td&gt;- 1つのオブジェクト中のみで使える変数&lt;br /&gt;- 変数が参照できるところはselfが指定するオブジェクトの内部に制限する。&lt;/td&gt; &lt;td&gt;@var = 1&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;クラス変数&lt;/td&gt; &lt;td&gt;- 該当するクラスの全てのオブジェクトが共有する変数&lt;br /&gt;- クラスメソッドを使ってアクセス可能&lt;br /&gt;- クラスの内部メソッドを定義する前のClassの宣言すぐ下に宣言する。&lt;/td&gt; &lt;td&gt;@@var = 1&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;グローバル変数&lt;/td&gt; &lt;td&gt;- プログラムのどこでも使える変数&lt;/td&gt; &lt;td&gt;$var = 1&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;controllerからviewへデータ伝達&quot;&gt;ControllerからViewへデータ伝達&lt;/h2&gt; &lt;p&gt;上でまず変数をみた理由は、ControllerからViewへデータを伝達する時、インストアんつ変数を使うのでです。データが伝達することを確認するため、&lt;code class=&quot;highlighter-rouge&quot;&gt;app/controllers/home_controller.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ApplicationController&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'dev-yakuza'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして修正したアクションに該当するViewファイルを修正します。&lt;code class=&quot;highlighter-rouge&quot;&gt;app/views/home/index.erb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Hello&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sx&quot;&gt;%= @name %&amp;gt;!! &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;確認するため、下記のコマンドを使ってRailsサーバを起動します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rails s &lt;span class=&quot;c&quot;&gt;# bundle exec rails server&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そしてブラウザで&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:3000/&lt;/code&gt;に接続したら、下記のように設定した変数が画面に表示されたことが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/data-in-controller-view-route/result-data-controller-view.png&quot; alt=&quot;Ruby on Rails サーバー実行の結果 - ControllerとViewのデーター交換&quot; /&gt;&lt;/p&gt; &lt;p&gt;このようにControllerからViewへデータを伝達するためにはインスタンス変数を使えます。&lt;/p&gt; &lt;h2 id=&quot;viewからcontrollerでデータを伝達&quot;&gt;ViewからControllerでデータを伝達&lt;/h2&gt; &lt;p&gt;ControllerからViewへデータを伝達するためには簡単にインスタンスヘンスを使えば良いでした。この理由はURLでRailsのウェブにリクエストが入ってくるとControllerがそのリクエストを処理して、Viewど表示するためです。&lt;/p&gt; &lt;p&gt;ViewからControllerへデータを伝達する意味は、ユーザがViewを使ってデータを入力したことです。&lt;/p&gt; &lt;p&gt;Viewは既にユーザのブラウザへ表示され他ので、ViewからControllerへデータを伝達する場合はユーザがデータを入力した時しかないのでです。&lt;/p&gt; &lt;p&gt;ViewからControllerへデータを送るためには、ウェブサービスでユーザの入力を送る方法と同じなので、GET方式とPOST方式でURLへリクエスト(Request)を送ることで送ることができます。&lt;/p&gt; &lt;h3 id=&quot;get方式&quot;&gt;GET方式&lt;/h3&gt; &lt;p&gt;GET方式でデータを送るため、Viewファイルを修正してみましょう。&lt;code class=&quot;highlighter-rouge&quot;&gt;app/views/home/index.erb&lt;/code&gt;ファイルを開いて、下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Hello&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sx&quot;&gt;%= @name %&amp;gt;!!&amp;lt;br/&amp;gt; &amp;lt;a href=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/?name=yakuza&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Display&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yakuza&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/a&amp;gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして送信されたGETパラメータを表示するためControllerを修正します。&lt;code class=&quot;highlighter-rouge&quot;&gt;app/controllers/home_controller.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ApplicationController&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'dev-yakuza'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;GET方式なのでデータを送るのでaタグを使ってデータ(&lt;code class=&quot;highlighter-rouge&quot;&gt;name=yakuza&lt;/code&gt;)を送りました。このように送信されたデータはControllerで&lt;code class=&quot;highlighter-rouge&quot;&gt;params&lt;/code&gt;と言うヘンスを使ってデータを取得することができます。(&lt;code class=&quot;highlighter-rouge&quot;&gt;params[:name]&lt;/code&gt;)&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;post方式&quot;&gt;POST方式&lt;/h3&gt; &lt;p&gt;POST方式でデータを送るため、Viewファイルを修正してみましょう。&lt;code class=&quot;highlighter-rouge&quot;&gt;app/views/home/index.erb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Hello&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sx&quot;&gt;%= @name %&amp;gt;!!&amp;lt;br/&amp;gt; &amp;lt;a href=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/?name=yakuza&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Display&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yakuza&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/a&amp;gt;&amp;lt;br/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:&amp;lt;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;submit&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/form&amp;gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そしてブラウザをみると下記のような画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/data-in-controller-view-route/before-send-data.png&quot; alt=&quot;POST転送 - データを入力する前の画面&quot; /&gt;&lt;/p&gt; &lt;p&gt;そして入力欄へデータを入力して&lt;code class=&quot;highlighter-rouge&quot;&gt;Submit&lt;/code&gt;ボタンを押したら下記のようなエラーが発生します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/data-in-controller-view-route/send-data-error.png&quot; alt=&quot;POST転送 - データ送信エラー画面&quot; /&gt;&lt;/p&gt; &lt;p&gt;エラーメッセージ(&lt;code class=&quot;highlighter-rouge&quot;&gt;Routing Error&lt;/code&gt;)を見ると分かると思いますが、Route設定をしてないので、このようなエラーが発生しました。&lt;/p&gt; &lt;p&gt;まず、今現在のRouteファイルを確認するため、&lt;code class=&quot;highlighter-rouge&quot;&gt;config/routes.rb&lt;/code&gt;ファイルを開いてみます。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'home#index'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のファイル内容でも分かると思いますが、Railsは&lt;code class=&quot;highlighter-rouge&quot;&gt;/&lt;/code&gt;のURLで&lt;code class=&quot;highlighter-rouge&quot;&gt;get&lt;/code&gt;方式のリクエストだけ連結されてます。したがって、POST方式のリクエストがくると、上のように&lt;code class=&quot;highlighter-rouge&quot;&gt;Routing Error&lt;/code&gt;が発生します。&lt;/p&gt; &lt;p&gt;そしたら、POSTのリクエストを受けるように、Routeを修正してみます。&lt;code class=&quot;highlighter-rouge&quot;&gt;config/routes.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'home#index'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'home#index'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして、また、&lt;code class=&quot;highlighter-rouge&quot;&gt;submit&lt;/code&gt;ボタンを押すと下記のようなエラーメッセージが表示されることが見えます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/data-in-controller-view-route/send-data-error-authenticity-token.png&quot; alt=&quot;POST転送 - データ転送エラー画面 authenticity token&quot; /&gt;&lt;/p&gt; &lt;p&gt;他の言語のフレームワークようにRailsも基本的セキュリティーの脆弱性を保護してます。ここでRailsは&lt;code class=&quot;highlighter-rouge&quot;&gt;CSRF - Cross-site request forgery&lt;/code&gt;の脆弱性を保護するため、POSTデータを送信する時、特定キー(key)を一緒に送るようにしてます。&lt;/p&gt; &lt;p&gt;このエラーを解決するためにはPOSTデータを転送する時、&lt;code class=&quot;highlighter-rouge&quot;&gt;authenticity_token&lt;/code&gt;と言うパラメータでRailsが提供する&lt;code class=&quot;highlighter-rouge&quot;&gt;form_authenticity_token&lt;/code&gt;を一緒に送る必要があります。&lt;/p&gt; &lt;p&gt;もう一回&lt;code class=&quot;highlighter-rouge&quot;&gt;app/views/home/index.erb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Hello&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sx&quot;&gt;%= @name %&amp;gt;!!&amp;lt;br/&amp;gt; &amp;lt;a href=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/?name=yakuza&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Display&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yakuza&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/a&amp;gt;&amp;lt;br/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;form&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;hidden&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;authenticity_token&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;%= form_authenticity_token %&amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:&amp;lt;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;text&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;submit&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/form&amp;gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そしてまた、&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:3000/&lt;/code&gt;接続して、入力欄にtestを入力してsubmitボタンを押すと下記のようにデータが上手く送信されて表示されることが確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/data-in-controller-view-route/result-post-data.png&quot; alt=&quot;POST転送 - データ転送成功画面&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでControllerとViewの間でデータを転送する方法についてみてみました。&lt;/p&gt; &lt;p&gt;ControllerからViewへデータを転送するためにはインスタンス変数を使って、ViewからControllerへデータを送信するためにはGET/POST形式でデータを転送しました。 POST方式で転送するため、RouteへPOSTのURLも追加してみました。&lt;/p&gt; &lt;p&gt;本格的データを使う前、準備段階でControllerとView間へデータを転送する方法をみてみました。次のブログポストではデータをDBへ保存して、保存したデータを表示する方法についてみてみます。&lt;/p&gt; &lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt; &lt;p&gt;このブログポストはシリーズで作成されてます。詳しく内容は下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;MacでRuby on Railsを始める&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;Railsで作ったプロジェクトのフォルダ構造&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/create-page/&quot; target=&quot;_blank&quot;&gt;Ruby on Railsを使って新しウェブページを作る&lt;/a&gt;&lt;/li&gt; &lt;li&gt;ControllerとView、Routeとのデータ交換&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/database/&quot; target=&quot;_blank&quot;&gt;RailsでDBを使う方法&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ここで使ったソースコードはGithubで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/dev-yakuza/study-rails&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Github ソースコード&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/ruby-on-rails/2020/data-in-controller-view-route/background.jpg"/></entry><entry xml:lang="ja"><title type="html">Gmailのsmtpを使ってメールを送信する</title><link href="https://dev-yakuza.github.io/django/gmail-smtp/" rel="alternate" type="text/html" title="Gmailのsmtpを使ってメールを送信する"/><published>2020-03-02T00:00:00+09:00</published><updated>2020-03-02T16:08:02+09:00</updated><id>https://dev-yakuza.github.io/django/gamil-smtp-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/django/gmail-smtp/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;section&quot;&gt;目次&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#概要&quot;&gt;概要&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#google-account設定&quot;&gt;Google Account設定&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#django設定&quot;&gt;django設定&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#メール送信&quot;&gt;メール送信&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#herokuでsmtpauthenticationerrorエラー&quot;&gt;herokuでSMTPAuthenticationErrorエラー&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#完了&quot;&gt;完了&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;djangoでサーバサイドを開発した時メールを送信する必要がありました。今回のブログポストではdjangoプロジェクトでGmailのsmtpを使ってメールを送信する方法を紹介します。それと、メール送信機能を開発した時あた問題点も共有します。&lt;/p&gt; &lt;h2 id=&quot;google-account設定&quot;&gt;Google Account設定&lt;/h2&gt; &lt;p&gt;SMTPを使ってGmailでメールを送信したい場合、まず&lt;code class=&quot;highlighter-rouge&quot;&gt;Less secure apps &amp;amp; your Google Account&lt;/code&gt;を設定する必要があります。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Less secure apps 設定: &lt;a href=&quot;https://support.google.com/accounts/answer/6010255&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;https://support.google.com/accounts/answer/6010255&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;まず、下記のリンクを使ってGoogle Accountに移動します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Google Account: &lt;a href=&quot;https://myaccount.google.com/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;https://myaccount.google.com/&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ログインした後、Google Accountで移動すると、下記のような画面が見えます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2020/gmail-smtp/google-account.png&quot; alt=&quot;Google Account ページ&quot; /&gt;&lt;/p&gt; &lt;p&gt;左の&lt;code class=&quot;highlighter-rouge&quot;&gt;Security&lt;/code&gt;メニューを選択して少しスクロールすると、下記の画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2020/gmail-smtp/less-secure-app.png&quot; alt=&quot;Google Account Less secure app&quot; /&gt;&lt;/p&gt; &lt;p&gt;メニューを選択して入って、&lt;code class=&quot;highlighter-rouge&quot;&gt;Allow less secure apps&lt;/code&gt;を&lt;code class=&quot;highlighter-rouge&quot;&gt;ON&lt;/code&gt;の状態で変更します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2020/gmail-smtp/less-secure-app-on.png&quot; alt=&quot;Google Account Less secure app&quot; /&gt;&lt;/p&gt; &lt;p&gt;メニューがどこにあるかよく分からない方は下記のリンクを使ってください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Google Account Less secure app access: &lt;a href=&quot;https://myaccount.google.com/lesssecureapps&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;https://myaccount.google.com/lesssecureapps&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;参考で&lt;code class=&quot;highlighter-rouge&quot;&gt;2-Step Verification&lt;/code&gt;（２段階認証）を使ってるアカウントは設定ができないので注意してください。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;django設定&quot;&gt;django設定&lt;/h2&gt; &lt;p&gt;djangoプロジェクトの&lt;code class=&quot;highlighter-rouge&quot;&gt;[project name]/settings.py&lt;/code&gt;を開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# send email &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EMAIL_BACKEND&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'django.core.mail.backends.smtp.EmailBackend'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EMAIL_HOST&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'smtp.googlemail.com'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EMAIL_USE_TLS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EMAIL_PORT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;587&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EMAIL_HOST_USER&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'Your email address'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EMAIL_HOST_PASSWORD&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'password'&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ここで、 &lt;code class=&quot;highlighter-rouge&quot;&gt;EMAIL_HOST_USER&lt;/code&gt;と&lt;code class=&quot;highlighter-rouge&quot;&gt;EMAIL_HOST_PASSWORD&lt;/code&gt;を自分のグーグルアカウント情報で変更します。&lt;/p&gt; &lt;h2 id=&quot;メール送信&quot;&gt;メール送信&lt;/h2&gt; &lt;p&gt;下記のコードを使ってHTMLメールを送信することができます。&lt;/p&gt; &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.core.mail&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;send_mail&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.conf&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;settings&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;send_mail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email_from&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recipient_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;html_message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;subject: メールのタイトル&lt;/li&gt; &lt;li&gt;message: メールの内容&lt;/li&gt; &lt;li&gt;email_from: メールを発送した方(私は&lt;code class=&quot;highlighter-rouge&quot;&gt;email_from = settings.EMAIL_HOST_USER&lt;/code&gt;コードを使ってます。)&lt;/li&gt; &lt;li&gt;recipient_list: メールを受ける方のリスト。メールアカウントのリスト(&lt;code class=&quot;highlighter-rouge&quot;&gt;[email, ]&lt;/code&gt;)&lt;/li&gt; &lt;li&gt;html_message: HTMLメッセージ&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;これで問題なく、メールを送信することができます。&lt;/p&gt; &lt;h2 id=&quot;herokuでsmtpauthenticationerrorエラー&quot;&gt;herokuでSMTPAuthenticationErrorエラー&lt;/h2&gt; &lt;p&gt;ローカルでは上手く使いましたが、herokuにデプロイした後、下記のようなエラーが出て、メールが送信されませんでした。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2020-03-02T04:53:02.037241+00:00 app[web.1]: new_conn_created &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; self.open&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; 2020-03-02T04:53:02.037241+00:00 app[web.1]: File &lt;span class=&quot;s2&quot;&gt;&quot;/app/.heroku/python/lib/python3.6/site-packages/django/core/mail/backends/smtp.py&quot;&lt;/span&gt;, line 69, &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;open 2020-03-02T04:53:02.037242+00:00 app[web.1]: self.connection.login&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;self.username, self.password&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 2020-03-02T04:53:02.037242+00:00 app[web.1]: File &lt;span class=&quot;s2&quot;&gt;&quot;/app/.heroku/python/lib/python3.6/smtplib.py&quot;&lt;/span&gt;, line 730, &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;login 2020-03-02T04:53:02.037242+00:00 app[web.1]: raise last_exception 2020-03-02T04:53:02.037243+00:00 app[web.1]: File &lt;span class=&quot;s2&quot;&gt;&quot;/app/.heroku/python/lib/python3.6/smtplib.py&quot;&lt;/span&gt;, line 721, &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;login 2020-03-02T04:53:02.037243+00:00 app[web.1]: &lt;span class=&quot;nv&quot;&gt;initial_response_ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;initial_response_ok&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 2020-03-02T04:53:02.037243+00:00 app[web.1]: File &lt;span class=&quot;s2&quot;&gt;&quot;/app/.heroku/python/lib/python3.6/smtplib.py&quot;&lt;/span&gt;, line 642, &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;auth 2020-03-02T04:53:02.037244+00:00 app[web.1]: raise SMTPAuthenticationError&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;code, resp&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 2020-03-02T04:53:02.037261+00:00 app[web.1]: smtplib.SMTPAuthenticationError: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;534, b&lt;span class=&quot;s1&quot;&gt;'....'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;GmailとGoogle Accountへ入って確認したら、HerokuサーバのIPがブロックされたことが確認できました。この問題を解決するため、下記のリンクに移動します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://accounts.google.com/b/0/DisplayUnlockCaptcha&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;https://accounts.google.com/b/0/DisplayUnlockCaptcha&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;上のリンクを移動すると下記のような画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/django/2020/gmail-smtp/display-unlock-captcha.png&quot; alt=&quot;Google Account Less secure app&quot; /&gt;&lt;/p&gt; &lt;p&gt;下にある&lt;code class=&quot;highlighter-rouge&quot;&gt;Continue&lt;/code&gt;ボタンを押します。そして、また、djangoを使ってメールを送信するとメールが残と送信されることが確認できます。&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでdjangoプロジェクトでGmailのSMTPを使ってメールを送信する方法について見てみました。特に問題ないと思いますが、私みたいに、IPをブロックされる方は上に紹介した内容を試してみてください。&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/django/2020/gmail-smtp/background.jpg"/></entry><entry xml:lang="ja"><title type="html">Ruby on Railsを使って新しウェブページを作る</title><link href="https://dev-yakuza.github.io/ruby-on-rails/create-page/" rel="alternate" type="text/html" title="Ruby on Railsを使って新しウェブページを作る"/><published>2020-02-26T00:00:00+09:00</published><updated>2020-03-17T12:58:27+09:00</updated><id>https://dev-yakuza.github.io/ruby-on-rails/create-page-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/ruby-on-rails/create-page/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;section&quot;&gt;目次&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#概要&quot;&gt;概要&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#controller&quot;&gt;Controller&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#controller生成エラー&quot;&gt;Controller生成エラー&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#controller生成ファイル&quot;&gt;Controller生成ファイル&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#controllerへactionを追加&quot;&gt;ControllerへActionを追加&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#view&quot;&gt;View&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#controllerとviewを連結&quot;&gt;ControllerとViewを連結&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#routes&quot;&gt;Routes&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#確認&quot;&gt;確認&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#完了&quot;&gt;完了&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#参考&quot;&gt;参考&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;Ruby on Railsを使って新しウェブページを生成する方法についてみてみようかと思います。&lt;/p&gt; &lt;p&gt;このブログポストはシリーズで作成されてます。詳しく内容は下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;MacでRuby on Railsを始める&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;Railsで作ったプロジェクトのフォルダ構造&lt;/a&gt;&lt;/li&gt; &lt;li&gt;Ruby on Railsを使って新しウェブページを作る&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/data-in-controller-view-route/&quot; target=&quot;_blank&quot;&gt;ControllerとView、Routeとのデータ交換&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/database/&quot; target=&quot;_blank&quot;&gt;RailsでDBを使う方法&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ここで使ったソースコードはGithubで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/dev-yakuza/study-rails&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Github ソースコード&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Ruby on Railsも他の言語のフレームワークと同じに&lt;code class=&quot;highlighter-rouge&quot;&gt;MVCパタン&lt;/code&gt;(Model-View-Controllerパタン)を持っています。したがって、新しウェブページを作成するためには基本的&lt;code class=&quot;highlighter-rouge&quot;&gt;View&lt;/code&gt;と&lt;code class=&quot;highlighter-rouge&quot;&gt;Controller&lt;/code&gt;を作成する必要があります。&lt;/p&gt; &lt;h2 id=&quot;controller&quot;&gt;Controller&lt;/h2&gt; &lt;p&gt;まず、下記のコマンドを使ってControllerを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd StudyRails&lt;/span&gt; bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rails generate controller home &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;generateのコマンドを下記のように簡単に&lt;code class=&quot;highlighter-rouge&quot;&gt;g&lt;/code&gt;で使うこともできます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rails g controller home &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;controller生成エラー&quot;&gt;Controller生成エラー&lt;/h3&gt; &lt;p&gt;上のコマンドを実行しても、何も動作しない場合、実行したコマンドを停止して、下記のコマンドを実行します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rake app:update:bin &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そしたら下記のようなメッセージを確認することができます。&lt;code class=&quot;highlighter-rouge&quot;&gt;Y&lt;/code&gt;を入力して進めます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/StudyRails/bin/rails? &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;enter &lt;span class=&quot;s2&quot;&gt;&quot;h&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;help&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Ynaqdhm] /StudyRails/bin/rake? &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;enter &lt;span class=&quot;s2&quot;&gt;&quot;h&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;help&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Ynaqdhm] &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして、まだ、下記のコマンドでControllerを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd StudyRails&lt;/span&gt; bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rails generate controller home &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;また、下記のようなメッセージが表示されて、Controllerが生成されない時は、&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;error Couldn&lt;span class=&quot;s1&quot;&gt;'t find an integrity file error Found 1 errors. ======================================== Your Yarn packages are out of date! Please run `yarn install --check-files` to update. ======================================== To disable this check, please change `check_yarn_integrity` to `false` in your webpacker config file (config/webpacker.yml). &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上の説明にもありますが、下記のコマンドを実行します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;yarn &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--check-files&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして、また、下記のコマンドを使ってControllerを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd StudyRails&lt;/span&gt; bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rails generate controller home &lt;span class=&quot;c&quot;&gt;# bundle exec rails g controller home&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;問題なく生成されたら、下記のようなメッセージが確認されます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;create app/controllers/home_controller.rb invoke erb create app/views/home invoke test_unit create &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;/controllers/home_controller_test.rb invoke helper create app/helpers/home_helper.rb invoke test_unit invoke assets invoke scss create app/assets/stylesheets/home.scss &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;controller生成ファイル&quot;&gt;Controller生成ファイル&lt;/h3&gt; &lt;p&gt;RailsのコマンドでControllerを生成した場合は下記のようなファイルが生成されます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├── app │   ├── assets │   │   ├── stylesheets │   │   │   ├── home.scss │   ├── controllers │   │   ├── home_controller.rb │   ├── helpers │   │   ├── home_helper.rb │   ├── views │   │   ├── home ├── &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; │   ├── controllers │   │   ├── home_controller_test.rb &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;このようなファイル中で、&lt;code class=&quot;highlighter-rouge&quot;&gt;app/controllers/home_controller.rb&lt;/code&gt;を使って、ほとんどの処理を作ります。&lt;/p&gt; &lt;h3 id=&quot;controllerへactionを追加&quot;&gt;ControllerへActionを追加&lt;/h3&gt; &lt;p&gt;上ので生成された&lt;code class=&quot;highlighter-rouge&quot;&gt;app/controllers/home_controller.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HomeController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ApplicationController&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ここではhome_controllerへindex関数を追加しました。RailsではControllerへ追加した関数をActionと表現します。&lt;/p&gt; &lt;h2 id=&quot;view&quot;&gt;View&lt;/h2&gt; &lt;p&gt;Railsのコマンドを使ってControllerを生成したら、下記のようなフォルダが確認できます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├── app │   ├── views │   │   ├── home &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Railsのコマンドで生成されたhomeフォルダへhome_controller.rbに必要なViewファイルを生成して連結する予定です。&lt;/p&gt; &lt;p&gt;homeフォルダの中へ&lt;code class=&quot;highlighter-rouge&quot;&gt;index.erb&lt;/code&gt;ファイルを生成して下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Hello&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!!&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;controllerとviewを連結&quot;&gt;ControllerとViewを連結&lt;/h3&gt; &lt;p&gt;ControllerとViewを連結するためには特にすることがないです。ControllerのAction名(関数名 - &lt;code class=&quot;highlighter-rouge&quot;&gt;def index&lt;/code&gt;)とViewファイルのファイル名(&lt;code class=&quot;highlighter-rouge&quot;&gt;index.erb&lt;/code&gt;)を一致させると、Railsは他に設定しなくても、自動的に該当するViewファイルを連結します。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;routes&quot;&gt;Routes&lt;/h2&gt; &lt;p&gt;Railsで&lt;code class=&quot;highlighter-rouge&quot;&gt;Routes&lt;/code&gt;はURLとControllerを連結する役割をします。上で作ったControllerを連結するため&lt;code class=&quot;highlighter-rouge&quot;&gt;config/routes.rb&lt;/code&gt;ファイルを開いて下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;to: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'home#index'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のように修正すると、&lt;code class=&quot;highlighter-rouge&quot;&gt;/&lt;/code&gt;のURLに&lt;code class=&quot;highlighter-rouge&quot;&gt;GET&lt;/code&gt;のリクエストが来ると、&lt;code class=&quot;highlighter-rouge&quot;&gt;home_controller&lt;/code&gt;の&lt;code class=&quot;highlighter-rouge&quot;&gt;index&lt;/code&gt;アクション（関数）が実行されます。このように実行されあたindexアクションは同じ名前である&lt;code class=&quot;highlighter-rouge&quot;&gt;home/index.erb&lt;/code&gt;ファイルを探して画面に表示します。&lt;/p&gt; &lt;h2 id=&quot;確認&quot;&gt;確認&lt;/h2&gt; &lt;p&gt;これで新しページを表示する準備は終わりました。下記のコマンドでRailsサーバーを起動します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rails server &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;または、簡単に下記のコマンドを使うこともできます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rails s &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そしてブラウザを開いて&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:3000/&lt;/code&gt;へ接続すると下記のように私たちが作った画面が確認されます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/create-page/rails-server.png&quot; alt=&quot;Ruby on Railsサーバー実行結果&quot; /&gt;&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでRuby on Railsを使って新しページを生成する方法について確認しました。&lt;/p&gt; &lt;p&gt;Controllerを生成してController中にアクション（関数）を作って、アクション名（関数名）と同じ名前のViewファイルを作って、最後にRouteへURLとControllerを連結することで新しいページを表示することができました。&lt;/p&gt; &lt;p&gt;じゃ、一旦ページを作ることはできましたので、次はデータを使う方法について調べてみましょう！&lt;/p&gt; &lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt; &lt;p&gt;このブログポストはシリーズで作成されてます。詳しく内容は下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;MacでRuby on Railsを始める&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;Railsで作ったプロジェクトのフォルダ構造&lt;/a&gt;&lt;/li&gt; &lt;li&gt;Ruby on Railsを使って新しウェブページを作る&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/data-in-controller-view-route/&quot; target=&quot;_blank&quot;&gt;ControllerとView、Routeとのデータ交換&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/database/&quot; target=&quot;_blank&quot;&gt;RailsでDBを使う方法&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ここで使ったソースコードはGithubで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/dev-yakuza/study-rails&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Github ソースコード&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/ruby-on-rails/2020/create-page/background.jpg"/></entry><entry xml:lang="ja"><title type="html">Railsで作ったプロジェクトのフォルダ構造</title><link href="https://dev-yakuza.github.io/ruby-on-rails/folder-structure/" rel="alternate" type="text/html" title="Railsで作ったプロジェクトのフォルダ構造"/><published>2020-02-25T00:00:00+09:00</published><updated>2020-03-17T12:58:27+09:00</updated><id>https://dev-yakuza.github.io/ruby-on-rails/folder-structure-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/ruby-on-rails/folder-structure/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;section&quot;&gt;目次&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#概要&quot;&gt;概要&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#プロジェクトの構造&quot;&gt;プロジェクトの構造&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#controller関連&quot;&gt;Controller関連&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#view関連&quot;&gt;View関連&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#url関連&quot;&gt;URL関連&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#完了&quot;&gt;完了&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#参考&quot;&gt;参考&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;今回のブログではRuby on RailsをインストールしてRuby on Railsを使って新しプロジェクトを生成する方法について確認しました。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/rails-on-mac/&quot; target=&quot;_blank&quot;&gt;MacでRuby on Railsを始める&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;今回のブログポストでは、新しく生成したRailsのプロジェクトの構造を把握してみようかと思います。&lt;/p&gt; &lt;p&gt;このブログポストはシリーズで作成されてます。詳しく内容は下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;MacでRuby on Railsを始める&lt;/a&gt;&lt;/li&gt; &lt;li&gt;Railsで作ったプロジェクトのフォルダ構造&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/create-page/&quot; target=&quot;_blank&quot;&gt;Ruby on Railsを使って新しウェブページを作る&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/data-in-controller-view-route/&quot; target=&quot;_blank&quot;&gt;ControllerとView、Routeとのデータ交換&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/database/&quot; target=&quot;_blank&quot;&gt;RailsでDBを使う方法&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ここで使ったソースコードはGithubで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/dev-yakuza/study-rails&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Github ソースコード&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;プロジェクトの構造&quot;&gt;プロジェクトの構造&lt;/h2&gt; &lt;p&gt;Ruby on Railsでプロジェクトを生成すると、下記のようなプロジェクトが生成されます。下記の内容は生成されたプロジェクトのフォルダ中で重要な部分だけまとめました。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├── Gemfile ├── Gemfile.lock ├── README.md ├── Rakefile ├── app │   ├── controllers │   │   ├── application_controller.rb │   │   └── concerns │   ├── models │   │   ├── application_record.rb │   │   └── concerns │   └── views │   └── layouts │   ├── application.html.erb │   ├── mailer.html.erb │   └── mailer.text.erb ├── babel.config.js ├── bin ├── config │   ├── locales │   │   └── en.yml │   ├── routes.rb ├── config.ru ├── db │   ├── development.sqlite3 │   └── seeds.rb ├── lib ├── log │   └── development.log ├── package.json ├── postcss.config.js ├── public ├── storage ├── temp ├── &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; ├── vendor └── yarn.lock &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;controller関連&quot;&gt;Controller関連&lt;/h2&gt; &lt;p&gt;Ruby on Railsも他のフレームワークと同じように&lt;code class=&quot;highlighter-rouge&quot;&gt;MVCパタン&lt;/code&gt;(Model-View-Controllerパタン)を使ってます。したがって、Ruby on Railsを使ってModel, View, Controllerを作ることでウェブサービスを作ることができます。&lt;/p&gt; &lt;p&gt;Ruby on RailsでControllerを生成して、下記のようなフォルダ、ファイルを使うことになります。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├── app │   ├── assets │   │   ├── stylesheets │   │   │   ├── home.scss │   ├── controllers │   │   ├── home_controller.rb │   ├── helpers │   │   ├── home_helper.rb ├── &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; │   ├── controllers │   │   ├── home_controller_test.rb &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;次のブログポストで紹介しますが、RailsのコマンドでConrollerを生成すると上のようなファイルが生成されます。ここではhome_controllerを生成した例題になります。&lt;/p&gt; &lt;p&gt;Controllerを生成する方法については下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/create-page/#controller&quot; target=&quot;_blank&quot;&gt;Ruby on Railsを使って新しウェブページを作る - Controller&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;view関連&quot;&gt;View関連&lt;/h2&gt; &lt;p&gt;Ruby on Railsで画面を表示するためにはViewを下記のフォルダに生成することになります。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├── app │   ├── views │   │   ├── home &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ここでは上と同じようにhome_controllerを生成した後のフォルダの構造です。皆さんはまだ、homeフォルダが見えないと思います。home_controllerをRailsのコマンドで生成すると、そこに必要なViewを保管するhomeフォルダが自動で生成されます。&lt;/p&gt; &lt;p&gt;ControllerとViewを生成する方法については下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/create-page/#view&quot; target=&quot;_blank&quot;&gt;Ruby on Railsを使って新しウェブページを作る - View&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;url関連&quot;&gt;URL関連&lt;/h2&gt; &lt;p&gt;RailsはRubyと言う言語を使ってウェブサービスを作るためのフレームワークとなります。ウェブサービスを作るためのフレームワークなので、当たり前ですが、URLを管理する機能を持っています。&lt;/p&gt; &lt;p&gt;RailsでURLはconfigフォルダ中のroutes.rbファイルで管理します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├── config │   ├── routes.rb &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Railsへ新しURLを追加する方法については下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/create-page/#routes&quot; target=&quot;_blank&quot;&gt;Ruby on Railsを使って新しウェブページを作る - Route&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;database&quot;&gt;Database&lt;/h2&gt; &lt;p&gt;Ruby on RailsでDataを使うためのファイルたちは下記のようです。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├── app │   ├── models │   │   ├── post.rb ├── config │   ├── database.yml ├── db │   ├── migrate │   │   ├── 20200313092804_create_posts.rb ├── &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; │   ├── fixtures │   │   ├── posts.yml │   ├── models │   │   ├── post_test.rb &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;config/database.yml: Databaseの連結情報の設定ファイル&lt;/li&gt; &lt;li&gt;app/models/post.rb: 実際テーブルと連動するModel&lt;/li&gt; &lt;li&gt;db/migrate/20200313092804_create_posts.rb: テーブルを生成するためのmigratoinファイル&lt;/li&gt; &lt;li&gt;test/fixtures/posts.yml: テストのためのDummyデータ&lt;/li&gt; &lt;li&gt;test/models/post_test.rb: Modelのユニットテストするためのファイル&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;データベースを設定して、データを使う方法については下記のブログを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/data&quot; target=&quot;_blank&quot;&gt;RailsでDBを使う方法&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでRuby on Railsのフォルダの構造をみてみました。今後はウェブサービスを作成するためController, View,そしてModelを生成する方法について紹介します。&lt;/p&gt; &lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt; &lt;p&gt;このブログポストはシリーズで作成されてます。詳しく内容は下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;MacでRuby on Railsを始める&lt;/a&gt;&lt;/li&gt; &lt;li&gt;Railsで作ったプロジェクトのフォルダ構造&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/create-page/&quot; target=&quot;_blank&quot;&gt;Ruby on Railsを使って新しウェブページを作る&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/data-in-controller-view-route/&quot; target=&quot;_blank&quot;&gt;ControllerとView、Routeとのデータ交換&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/database/&quot; target=&quot;_blank&quot;&gt;RailsでDBを使う方法&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ここで使ったソースコードはGithubで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/dev-yakuza/study-rails&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Github ソースコード&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/ruby-on-rails/2020/folder-structure/background.jpg"/></entry><entry xml:lang="ja"><title type="html">MacでRuby on Railsを始める</title><link href="https://dev-yakuza.github.io/ruby-on-rails/rails-on-mac/" rel="alternate" type="text/html" title="MacでRuby on Railsを始める"/><published>2020-02-14T00:00:00+09:00</published><updated>2020-03-17T12:58:27+09:00</updated><id>https://dev-yakuza.github.io/ruby-on-rails/rails-on-mac-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/ruby-on-rails/rails-on-mac/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;section&quot;&gt;目次&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#概要&quot;&gt;概要&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#homebrewインストール&quot;&gt;Homebrewインストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#rbenvインストール&quot;&gt;rbenvインストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#rbenv初期化&quot;&gt;rbenv初期化&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#他のバージョンのrubyをインストール&quot;&gt;他のバージョンのRubyをインストール&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#エラー対応&quot;&gt;エラー対応&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#バージョン変更&quot;&gt;バージョン変更&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#bundlerインストール&quot;&gt;Bundlerインストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#railsインストール&quot;&gt;Railsインストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#yarnインストール&quot;&gt;yarnインストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#railsプロジェクトの生成や確認&quot;&gt;Railsプロジェクトの生成や確認&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#完了&quot;&gt;完了&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#参考&quot;&gt;参考&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;最近Ruby on Railsを使ってプロジェクトを進めることになりました。このブログポストでは&lt;code class=&quot;highlighter-rouge&quot;&gt;Ruby on Rails&lt;/code&gt;をMacにインストールする方法とインストールしたRailsを使ってプロジェクトを始める方法について説明します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Rails公式サイト: &lt;a href=&quot;https://rubyonrails.org/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;https://rubyonrails.org/&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;このブログポストはシリーズで作成されてます。詳しく内容は下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;MacでRuby on Railsを始める&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;Railsで作ったプロジェクトのフォルダ構造&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/create-page/&quot; target=&quot;_blank&quot;&gt;Ruby on Railsを使って新しウェブページを作る&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/data-in-controller-view-route/&quot; target=&quot;_blank&quot;&gt;ControllerとView、Routeとのデータ交換&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/database/&quot; target=&quot;_blank&quot;&gt;RailsでDBを使う方法&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ここで使ったソースコードはGithubで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/dev-yakuza/study-rails&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Github ソースコード&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;homebrewインストール&quot;&gt;Homebrewインストール&lt;/h2&gt; &lt;p&gt;RailsをMacにインストールするためにはMacのパッケージ管理者である&lt;code class=&quot;highlighter-rouge&quot;&gt;Homebrew&lt;/code&gt;を使え予定です。まず、下記のコマンドで、MacにHomebrewがインストールされたか確認します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;既にHomebrewがMacにインストールされたら下記のような画面をみることができます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Homebrew 2.2.6 Homebrew/homebrew-core &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;git revision 93ac3&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; last commit 2020-02-18&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; Homebrew/homebrew-cask &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;git revision 373c1&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; last commit 2020-02-18&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のような画面がかでる方は、次のステップに進んでください。上のような画面が出ない方は、下記のコマンドでHomebrewをインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/usr/bin/ruby &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-fsSL&lt;/span&gt; https://raw.githubusercontent.com/Homebrew/install/master/install&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;インストールが終わったら、下記のコマンドを実行してインストールがされたか確認します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;インストールされたら、下記のような画面が見えます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Homebrew 2.2.6 Homebrew/homebrew-core &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;git revision 93ac3&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; last commit 2020-02-18&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; Homebrew/homebrew-cask &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;git revision 373c1&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; last commit 2020-02-18&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;rbenvインストール&quot;&gt;rbenvインストール&lt;/h2&gt; &lt;p&gt;Macには基本的&lt;code class=&quot;highlighter-rouge&quot;&gt;Ruby&lt;/code&gt;がインストールされております。だから、すぐRailsをインストールしてもいいですが、色んなRubyのバージョンを使うため、ルビバージョン管理者である&lt;code class=&quot;highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;をインストールします。&lt;/p&gt; &lt;p&gt;下記のコマンドを実行してrbenvをインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;rbenv ruby-build &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;インストールが終わったら下記のような画面が見えます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;==&amp;gt;&lt;/span&gt; Pouring rbenv-1.1.2.catalina.bottle.tar.gz 🍺 /usr/local/Cellar/rbenv/1.1.2: 36 files, 69KB &lt;span class=&quot;o&quot;&gt;==&amp;gt;&lt;/span&gt; Caveats &lt;span class=&quot;o&quot;&gt;==&amp;gt;&lt;/span&gt; ruby-build ruby-build installs a non-Homebrew OpenSSL &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;each Ruby version installed and these are never upgraded. To &lt;span class=&quot;nb&quot;&gt;link &lt;/span&gt;Rubies to Homebrew&lt;span class=&quot;s1&quot;&gt;'s OpenSSL 1.1 (which is upgraded) add the following to your ~/.zshrc: export RUBY_CONFIGURE_OPTS=&quot;--with-openssl-dir=$(brew --prefix openssl@1.1)&quot; Note: this may interfere with building old versions of Ruby (e.g &amp;lt;2.4) that use OpenSSL &amp;lt;1.1. &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして、上で出たように&lt;code class=&quot;highlighter-rouge&quot;&gt;.zshrc&lt;/code&gt;を開いて下記の内容を追加します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# code ~/.zshrc&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RUBY_CONFIGURE_OPTS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;--with-openssl-dir=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;brew &lt;span class=&quot;nt&quot;&gt;--prefix&lt;/span&gt; openssl@1.1&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;rbenv初期化&quot;&gt;rbenv初期化&lt;/h2&gt; &lt;p&gt;rbenvのインストールが終わったら、下記のコマンドを実行してrbenvを初期化します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rbenv init &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のコマンドを実行したら下記のような画面が見えます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Load rbenv automatically by appending&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# the following to ~/.zshrc:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;rbenv init -&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上の説明通り、&lt;code class=&quot;highlighter-rouge&quot;&gt;.zshrc&lt;/code&gt;ファイルを開いて下記の内容を追加します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# code ~/.zshrc&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;rbenv init -&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;全ての設定がうまくできたか確認するため下記のコマンドを実行します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-fsSL&lt;/span&gt; https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;実行が終わったら、下記のような画面が確認できます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Checking &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;rbenv&lt;span class=&quot;s1&quot;&gt;' in PATH: /usr/local/bin/rbenv Checking for rbenv shims in PATH: OK Checking `rbenv install'&lt;/span&gt; support: /usr/local/bin/rbenv-install &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ruby-build 20200115&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; Counting installed Ruby versions: none There aren&lt;span class=&quot;s1&quot;&gt;'t any Ruby versions installed under `/Users/jeonghean_kim/.rbenv/versions'&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; You can &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;Ruby versions like so: rbenv &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;2.2.4 Checking RubyGems settings: OK Auditing installed plugins: OK &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;他のバージョンのrubyをインストール&quot;&gt;他のバージョンのRubyをインストール&lt;/h2&gt; &lt;p&gt;Macに他のバージョンのRubyをインストールする方法について見てみましょう。まず、下記のコマンドを実行して現在のRubyのバージョンを確認します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ruby &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のコマンドを実行したら下記のような画面が見えます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ruby 2.6.3p62 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;2019-04-16 revision 67580&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;universal.x86_64-darwin19] &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のコマンドを使ってrbenvを使ってインストールできるRubyのバージョンを確認します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rbenv &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のコマンドを実行したら、下記のようなRubyのバージョンリストが確認できます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;... truffleruby-1.0.0-rc3 truffleruby-1.0.0-rc5 truffleruby-1.0.0-rc6 truffleruby-1.0.0-rc7 truffleruby-1.0.0-rc8 truffleruby-1.0.0-rc9 truffleruby-19.0.0 truffleruby-19.1.0 truffleruby-19.2.0 truffleruby-19.2.0.1 truffleruby-19.3.0 truffleruby-19.3.0.2 truffleruby-19.3.1 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;Rubyのバージョンリストが多いなので、下記のコマンドを実行して一番最新の安定(Stable)されたRubyのバージョンを検索します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rbenv &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/^[[:space:]]*[0-9]\{1,\}\.[0-9]\{1,\}\.[0-9]\{1,\}[[:space:]]*$/ h;${g;p;}'&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そしたら、下記のような結果が見えます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2.7.0 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のコマンドで一番最新のRubyをインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rbenv &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;2.7.0 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;または、下記のコマンドでいつも、最新のRubyをインストールすることができます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rbenv &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;rbenv &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/^[[:space:]]*[0-9]\{1,\}\.[0-9]\{1,\}\.[0-9]\{1,\}[[:space:]]*$/ h;${g;p;}'&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;もちろん、古いバージョンもインストールできます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rbenv &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;2.3.1 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;インストールが終わったら、下記のコマンドを実行して新い環境を再設定します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rbenv rehash &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;エラー対応&quot;&gt;エラー対応&lt;/h3&gt; &lt;p&gt;私はインストール中、下記のエラーが出ました。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Last 10 log lines: checking &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;inttypes.h... &lt;span class=&quot;nb&quot;&gt;yes &lt;/span&gt;checking &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;stdint.h... &lt;span class=&quot;nb&quot;&gt;yes &lt;/span&gt;checking &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;unistd.h... &lt;span class=&quot;nb&quot;&gt;yes &lt;/span&gt;checking minix/config.h usability... no checking minix/config.h presence... no checking &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;minix/config.h... no checking whether it is safe to define __EXTENSIONS__... &lt;span class=&quot;nb&quot;&gt;yes &lt;/span&gt;checking &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;using physical directory... &lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; checking whether CFLAGS is valid... no configure: error: something wrong with &lt;span class=&quot;nv&quot;&gt;CFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-I/usr/local/include -L/usr/local/lib &quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のように&lt;code class=&quot;highlighter-rouge&quot;&gt;./zshrc&lt;/code&gt;を修正して解決しました。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# code ~/.zshrc&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;CFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;バージョン変更&quot;&gt;バージョン変更&lt;/h2&gt; &lt;p&gt;下記のコマンドを実行して現在インストールされたRubyのバージョンを確認します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rbenv versions &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のコマンドを実行したら下記のような結果が見えます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; system &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;by /Users/jeonghean_kim/.rbenv/version&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 2.7.0 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;前に&lt;code class=&quot;highlighter-rouge&quot;&gt;*&lt;/code&gt;マークがついてるバージョンが現在選択されたバージョンになります。&lt;/p&gt; &lt;p&gt;下記のコマンドを実行してRubyのバージョンをもう一度確認します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ruby &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# ruby 2.6.3p62 (2019-04-16 revision 67580) [universal.x86_64-darwin19]&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;それで、下記のコマンドを実行してRubyのバージョンを変更します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rbenv global 2.7.0 rbenv rehash &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして下記のコマンドを実行してバージョンを確認してみると、Rubyのバージョンが変わったことが確認できます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ruby &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# ruby 2.7.0p0 (2019-12-25 revision 647ee6f091) [x86_64-darwin19]&lt;/span&gt; rbenv versions &lt;span class=&quot;c&quot;&gt;# system (set by /Users/jeonghean_kim/.rbenv/version)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# * 2.7.0&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;bundlerインストール&quot;&gt;Bundlerインストール&lt;/h2&gt; &lt;p&gt;Rubyの&lt;code class=&quot;highlighter-rouge&quot;&gt;Gem&lt;/code&gt;を管理する&lt;code class=&quot;highlighter-rouge&quot;&gt;Bundler&lt;/code&gt;をインストールします。GemはRubyのライブラリ、パッケージと考えるといいと思います。Bundlerはこのようなライブラリ、パッケージを簡単にインストールや管理することができるようにしてくれます。&lt;/p&gt; &lt;p&gt;下記のコマンドでBundlerをインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gem &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;bundler &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;インストールが終わったら、下記のコマンドを実行してBundlerがうまくインストールされたか確認します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundler &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Bundler version 2.1.4&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;railsインストール&quot;&gt;Railsインストール&lt;/h2&gt; &lt;p&gt;今度は&lt;code class=&quot;highlighter-rouge&quot;&gt;Rails&lt;/code&gt;をインストールしてみます。下記のコマンドを使ってRailsをインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gem &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;rails rbenv rehash &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;インストールが終わったら、下記のコマンドを使ってRailsがうまくインストールされたか確認します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rails &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Rails 6.0.2.1&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;yarnインストール&quot;&gt;yarnインストール&lt;/h2&gt; &lt;p&gt;Railsプロジェクトを生成、実行するためには&lt;code class=&quot;highlighter-rouge&quot;&gt;yarn&lt;/code&gt;のインストールが必要です。yarnはjavascriptのライブラリをインストールや管理する時使うものになります。&lt;/p&gt; &lt;p&gt;下記のコマンドを使ってyarnをインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;yarn &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;railsプロジェクトの生成や確認&quot;&gt;Railsプロジェクトの生成や確認&lt;/h2&gt; &lt;p&gt;インストールしたRailsを使ってRailsプロジェクトを生成してみましょう。下記のコマンドを使って新いRailsプロジェクトを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rails new StudyRails &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;プロジェクトを生成中に下記のようなメッセージが見える方は、&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;The dependency tzinfo-data &lt;span class=&quot;o&quot;&gt;(&amp;gt;=&lt;/span&gt; 0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; will be unused by any of the platforms Bundler is installing &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; Bundler is installing &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;ruby but the dependency is only &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;x86-mingw32, x86-mswin32, x64-mingw32, java. To add those platforms to the bundle, run &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;bundle lock &lt;span class=&quot;nt&quot;&gt;--add-platform&lt;/span&gt; x86-mingw32 x86-mswin32 x64-mingw32 java&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;プロジェクトの生成が終わった後、下記のコマンドを実行します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;StudyRails bundle lock &lt;span class=&quot;nt&quot;&gt;--add-platform&lt;/span&gt; x86-mingw32 x86-mswin32 x64-mingw32 java bundle &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;もし、下記のようなエラーメッセージが表示されると、&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Your Ruby version is 2.6.3, but your Gemfile specified 2.7.0 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;bundleのPathがうまく認識されないので、問題が発生します。私はこの問題を解決するため、&lt;code class=&quot;highlighter-rouge&quot;&gt;.zshrc&lt;/code&gt;ファイルに下記の内容を追加しました。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# code ~/.zshrc&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;bundler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/Users/&lt;span class=&quot;nv&quot;&gt;$USER&lt;/span&gt;/.rbenv/shims/bundler &lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ruby&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/Users/&lt;span class=&quot;nv&quot;&gt;$USER&lt;/span&gt;/.rbenv/shims/ruby &lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;bundle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/Users/&lt;span class=&quot;nv&quot;&gt;$USER&lt;/span&gt;/.rbenv/shims/bundle &lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;gem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/Users/&lt;span class=&quot;nv&quot;&gt;$USER&lt;/span&gt;/.rbenv/shims/gem &lt;span class=&quot;nb&quot;&gt;alias &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;rails&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/Users/&lt;span class=&quot;nv&quot;&gt;$USER&lt;/span&gt;/.rbenv/shims/rails &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;生成が終わったら、下記のコマンドでRailsプロジェクトを実行します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd StudyRails&lt;/span&gt; bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rails server &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;もし下記のようなワーニングがでったら、&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Warning: the running version of Bundler &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;2.1.2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; is older than the version that created the lockfile &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;2.1.4&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; We suggest you to upgrade to the version that created the lockfile by running &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;gem &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;bundler:2.1.4&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のコマンドで実行してみてください。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rails server &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;実行が終わったら、ブラウザを使って&lt;code class=&quot;highlighter-rouge&quot;&gt;http://127.0.0.1:3000/&lt;/code&gt;に移動してみます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/ruby-on-rails/2020/rails-on-mac/rails-server.png&quot; alt=&quot;Ruby on Rails サーバー実行結果&quot; /&gt;&lt;/p&gt; &lt;p&gt;問題なく進めたら、上のようにRailsの初期画面を確認することができます。&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでRailsプロジェクトを始めるため、Rubyのバージョンを変えってRailsをインストールする方法についてみてみました。私は簡単に設定できると思いましたが、以前jekyllのブログのため、&lt;code class=&quot;highlighter-rouge&quot;&gt;.zshrc&lt;/code&gt;に設定したPathの問題で結構黒しました。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;GEM_HOME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$HOME&lt;/span&gt;/gems &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$HOME&lt;/span&gt;/gems/bin:&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;皆さんももし、変な問題が発生したら、zshrcに変なPathが設定されたか確認してみてください。これでRailsを進めてみましょう！&lt;/p&gt; &lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt; &lt;p&gt;このブログポストはシリーズで作成されてます。詳しく内容は下記のリンクを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;MacでRuby on Railsを始める&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/folder-structure/&quot; target=&quot;_blank&quot;&gt;Railsで作ったプロジェクトのフォルダ構造&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/create-page/&quot; target=&quot;_blank&quot;&gt;Ruby on Railsを使って新しウェブページを作る&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/data-in-controller-view-route/&quot; target=&quot;_blank&quot;&gt;ControllerとView、Routeとのデータ交換&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/ruby-on-rails/database/&quot; target=&quot;_blank&quot;&gt;RailsでDBを使う方法&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;ここで使ったソースコードはGithubで確認できます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/dev-yakuza/study-rails&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Github ソースコード&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/ruby-on-rails/background.png"/></entry><entry xml:lang="ja"><title type="html">react-native-image-modal</title><link href="https://dev-yakuza.github.io/react-native/react-native-image-modal/" rel="alternate" type="text/html" title="react-native-image-modal"/><published>2020-01-31T00:00:00+09:00</published><updated>2020-01-31T13:48:22+09:00</updated><id>https://dev-yakuza.github.io/react-native/react-native-image-modal-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/react-native/react-native-image-modal/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;section&quot;&gt;目次&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#概要&quot;&gt;概要&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#プレビュー&quot;&gt;プレビュー&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#インストール&quot;&gt;インストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#使い方&quot;&gt;使い方&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#properties&quot;&gt;Properties&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#機能&quot;&gt;機能&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#例題プロジェクト&quot;&gt;例題プロジェクト&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#contribute&quot;&gt;Contribute&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#完了&quot;&gt;完了&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;イメージを選択したら全体画面で表示して拡大、縮小する機能があるコンポーネントが必要になりました。多分検索すると上手く作ったコンポーネントがあると思いますが、今回は時間を掛って&lt;code class=&quot;highlighter-rouge&quot;&gt;react-native-image-modal&lt;/code&gt;と言うコンポーネントを作ってみました。&lt;/p&gt; &lt;p&gt;このブログポストでは私が作った&lt;code class=&quot;highlighter-rouge&quot;&gt;react-native-image-modal&lt;/code&gt;を使う方法についてみてみます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Github: &lt;a href=&quot;https://github.com/dev-yakuza/react-native-image-modal&quot; target=&quot;_blank&quot;&gt;react-native-image-modal&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;プレビュー&quot;&gt;プレビュー&lt;/h2&gt; &lt;p&gt;まず、今回使うreact-native-image-modalは下記のように動作します。&lt;/p&gt; &lt;div class=&quot;half_image_container&quot;&gt; &lt;img class=&quot;half_image&quot; src=&quot;/assets/images/category/react-native/2020/react-native-image-modal/pinch-zoom-and-move.gif&quot; alt=&quot;react-native-image-modal動作画面&quot; /&gt; &lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;インストール&quot;&gt;インストール&lt;/h2&gt; &lt;p&gt;下記のコマンドでreact-native-image-modalをインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--save&lt;/span&gt; react-native-image-modal &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;使い方&quot;&gt;使い方&lt;/h2&gt; &lt;p&gt;下記のようにイメージを全体サイズで表示したいコンポーネント中へreact-native-image-modalをインポートします。&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ImageModal&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react-native-image-modal&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のようにイメージモーダルを追加して使います。&lt;/p&gt; &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ImageModal&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;swipeToDismiss&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;resizeMode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;contain&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;imageBackgroundColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;#000000&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;imageWidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;https://cdn.pixabay.com/photo/2018/01/11/09/52/three-3075752_960_720.jpg&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt; &lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;properties&quot;&gt;Properties&lt;/h2&gt; &lt;p&gt;基本的なReact NativeのImageコンポーネントのPropsをそのまま使えます。このPropsは初めて画面へ表示される原本のイメージへ適用されます。（全体サイズモーダルのイメージには適用されません。）&lt;/p&gt; &lt;p&gt;下記にある内容はreact-native-image-modalへ専用のPropsです。&lt;/p&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;Prop&lt;/th&gt; &lt;th&gt;必須&lt;/th&gt; &lt;th&gt;タイプ&lt;/th&gt; &lt;th&gt;説明&lt;/th&gt; &lt;th&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;swipeToDismiss&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;boolean&lt;/td&gt; &lt;td&gt;スワイプして画面を閉じます。(&lt;code class=&quot;highlighter-rouge&quot;&gt;default: true&lt;/code&gt;)&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;imageBackgroundColor&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;原本イメージのバックグラウンドの色。&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;overlayBackgroundColor&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;string&lt;/td&gt; &lt;td&gt;全体画面サイズのモーダルのバックグラウンドの色。(&lt;code class=&quot;highlighter-rouge&quot;&gt;default: #000000&lt;/code&gt;)&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;onLongPressOriginImage&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;() =&amp;gt; void&lt;/td&gt; &lt;td&gt;原本のイメージを長押した時呼び出せるコールバック関数。&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;renderHeader&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;(close: () =&amp;gt; void) =&amp;gt; JSX.Element&lt;/td&gt; &lt;td&gt;Array&lt;JSX.Element&gt;&lt;/JSX.Element&gt;&lt;/td&gt; &lt;td&gt;全画面サイズモーダルのヘッダーの部分をカスタマイズする時使います。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;renderFooter&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;(close: () =&amp;gt; void) =&amp;gt; JSX.Element&lt;/td&gt; &lt;td&gt;Array&lt;JSX.Element&gt;&lt;/JSX.Element&gt;&lt;/td&gt; &lt;td&gt;全画面サイズモーダルのフッターをカスタマイズする時使います。&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;onTap&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;(eventParams: {locationX: number; locationY: number; pageX: number; pageY: number;}) =&amp;gt; void&lt;/td&gt; &lt;td&gt;全画面サイズモーダルのイメージを一回タップする時呼び出せるコールバック関数。&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;onDoubleTap&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;() =&amp;gt; void&lt;/td&gt; &lt;td&gt;全画面サイズモーダルのイメージを二回タップする時呼び出せるコールバック関数。&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;onLongPress&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;() =&amp;gt; void&lt;/td&gt; &lt;td&gt;全画面サイズモーダルのイメージを長押す時呼び出せるコールバック関数。&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;onOpen&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;() =&amp;gt; void&lt;/td&gt; &lt;td&gt;全画面サイズモーダルが開く時のコールバック&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;didOpen&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;() =&amp;gt; void&lt;/td&gt; &lt;td&gt;全画面サイズモーダルが完全に開いた後のコールバック&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;onMove&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;(position: {type: string; positionX: number; positionY: number; scale: number; zoomCurrentDistance: number;}) =&amp;gt; void&lt;/td&gt; &lt;td&gt;全画面サイズモーダルのイメージを移動する時のコールバック&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;responderRelease&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;(vx?: number, scale?: number) =&amp;gt; void&lt;/td&gt; &lt;td&gt;タッチイベントが終わる時のコールバック&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;willClose&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;() =&amp;gt; void&lt;/td&gt; &lt;td&gt;全画面サイズモーダルが閉じる前のコールバック&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;onClose&lt;/td&gt; &lt;td&gt;X&lt;/td&gt; &lt;td&gt;() =&amp;gt; void&lt;/td&gt; &lt;td&gt;全画面サイズモーダルが閉じる時のコールバック&lt;/td&gt; &lt;td&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;機能&quot;&gt;機能&lt;/h2&gt; &lt;p&gt;react-native-image-modalは甲斐のような機能を持っています。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;イメージモダールを開く/閉じる&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;half_image_container&quot;&gt; &lt;img class=&quot;half_image&quot; src=&quot;/assets/images/category/react-native/2020/react-native-image-modal/open-and-close-image-modal.gif&quot; alt=&quot;react-native-image-modalイメージモダールを開く/閉じる&quot; /&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;イメージをpinchで拡大、縮小、移動&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;half_image_container&quot;&gt; &lt;img class=&quot;half_image&quot; src=&quot;/assets/images/category/react-native/2020/react-native-image-modal/pinch-zoom-and-move.gif&quot; alt=&quot;react-native-image-modalイメージをpinchで拡大、縮小、移動&quot; /&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;イメージをダブルタップで拡大、縮小&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;half_image_container&quot;&gt; &lt;img class=&quot;half_image&quot; src=&quot;/assets/images/category/react-native/2020/react-native-image-modal/double-tap-zoom.gif&quot; alt=&quot;react-native-image-modalイメージをダブルタップで拡大、縮小&quot; /&gt; &lt;/div&gt; &lt;ul&gt; &lt;li&gt;スワイプでモーダルを閉じる&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;half_image_container&quot;&gt; &lt;img class=&quot;half_image&quot; src=&quot;/assets/images/category/react-native/2020/react-native-image-modal/swipe-to-dismiss.gif&quot; alt=&quot;react-native-image-modalスワイプでモーダルを閉じる&quot; /&gt; &lt;/div&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;例題プロジェクト&quot;&gt;例題プロジェクト&lt;/h2&gt; &lt;p&gt;Githubリポジトリへ例題プロジェクトも含まれています。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Github: &lt;a href=&quot;https://github.com/dev-yakuza/react-native-image-modal&quot; target=&quot;_blank&quot;&gt;react-native-image-modal&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;例題ソースを確認するため下記のようにGithubリポジトリをクロンします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/dev-yakuza/react-native-image-modal.git &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;例題プロジェクトへ必要なライブラリをインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;Example npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# iOS&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;ios pod &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のコマンドを使って例題プロジェクトを実行します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Example folder&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# iOS&lt;/span&gt; npm run ios &lt;span class=&quot;c&quot;&gt;# Android&lt;/span&gt; npm run android &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;contribute&quot;&gt;Contribute&lt;/h2&gt; &lt;p&gt;初めて作ったopensourceなので、完璧ではないと思います。もし、バグや機能を追加したい方がいるならプルリ投げてください。&lt;/p&gt; &lt;p&gt;少しでも楽にContributeできるように、このプロジェクトを開発する方法について共有します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;プロジェクトをクロンします。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/dev-yakuza/react-native-image-modal.git &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;下記のコマンドで開発環境を構築してタイプスクリプトを実行します。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;npm start &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;下記のコマンドで開発用のプロジェクトを実行します。&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;Develop npm &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# android&lt;/span&gt; npm run android &lt;span class=&quot;c&quot;&gt;# ios&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;ios pod &lt;span class=&quot;nb&quot;&gt;install cd&lt;/span&gt; .. npm run ios &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これで私が初めて作ったOpensource、react-native-image-modalを使う方法についてみてみました。たくさんの方へ役に立てほしいです。&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/react-native/2020/react-native-image-modal/background.jpg"/></entry><entry xml:lang="ja"><title type="html">1日コミットを維持するためのツール</title><link href="https://dev-yakuza.github.io/share/bitbar/" rel="alternate" type="text/html" title="1日コミットを維持するためのツール"/><published>2020-01-19T00:00:00+09:00</published><updated>2020-01-19T17:46:00+09:00</updated><id>https://dev-yakuza.github.io/share/bitbar-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/share/bitbar/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;section&quot;&gt;目次&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;a href=&quot;#概要&quot;&gt;概要&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#pluginフォルダ準備&quot;&gt;pluginフォルダ準備&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#bitbarインストール&quot;&gt;BitBarインストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#プラグインのインストール&quot;&gt;プラグインのインストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#プラグインソースコード追加&quot;&gt;プラグインソースコード追加&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#bitbarrc設定&quot;&gt;bitbarrc設定&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#プラグインの実行&quot;&gt;プラグインの実行&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#完了&quot;&gt;完了&lt;/a&gt;&lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; &lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;最近Githubの1日コミットをしています。1日コミット内容を確認するため、ChromeへGithubプロフィルページをいつも開いて、毎回確認していました。このような問題を解決するため&lt;code class=&quot;highlighter-rouge&quot;&gt;BitBar&lt;/code&gt;と言うツールと&lt;code class=&quot;highlighter-rouge&quot;&gt;github-contribution&lt;/code&gt;プラグインを使ってGithubのコミット内容をMacのStatusbarへ表示するようにしてみます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/share/2020/bitbar/bitbar-github-contribution.png&quot; alt=&quot;1日コミットを維持するためBitBarの活用 - bitbar github-contribution&quot; /&gt;&lt;/p&gt; &lt;ul&gt; &lt;li&gt;公式サイト: &lt;a href=&quot;https://getbitbar.com/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;BitBar&lt;/a&gt;&lt;/li&gt; &lt;li&gt;github-contributionプラグイン: &lt;a href=&quot;https://getbitbar.com/plugins/Dev/GitHub/github-contribution.10m.rb&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;github-contribution&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;pluginフォルダ準備&quot;&gt;pluginフォルダ準備&lt;/h2&gt; &lt;p&gt;BitBarのプラグインを保存するフォルダを作る必要があります。作りたい場所や名前でフォルダを生成します。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;bitbarインストール&quot;&gt;BitBarインストール&lt;/h2&gt; &lt;p&gt;下記のコマンドでBitBarをインストールします。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew cask &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;bitbar &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;インストールが完了されたら、下記のようにアプリリストへ追加されたことが確認できます。インストール完了されたBitBarアプリを実行します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/share/2020/bitbar/bitbar-app.png&quot; alt=&quot;1日コミットを維持するためBitBarの活用 - BitBarインストール完了&quot; /&gt;&lt;/p&gt; &lt;p&gt;BitBarアプリを実行すると下記のような画面が見えます。&lt;code class=&quot;highlighter-rouge&quot;&gt;Open&lt;/code&gt;を押してアプリを実行します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/share/2020/bitbar/open-bitbar-app.png&quot; alt=&quot;1日コミットを維持するためBitBarの活用 - BitBar実行&quot; /&gt;&lt;/p&gt; &lt;p&gt;もし、プラグインのフォルダを選択する画面が出ると上で準備したプラグインのフォルダを選択します。プラグインのフォルダは下記のようにいつでも変更できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/share/2020/bitbar/chage-plugin-folder.png&quot; alt=&quot;1日コミットを維持するためBitBarの活用 - BitBar pluginフォルダ変更&quot; /&gt;&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;プラグインのインストール&quot;&gt;プラグインのインストール&lt;/h2&gt; &lt;p&gt;下記のリンクをクリックしてgithub-contributionプラグインのサイトへ移動します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;github-contributionプラグイン: &lt;a href=&quot;https://getbitbar.com/plugins/Dev/GitHub/github-contribution.10m.rb&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;github-contribution&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;サイトへ移動したら下記のような画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/share/2020/bitbar/github-contribution-plugin-site.png&quot; alt=&quot;1日コミットを維持するためBitBarの活用 - github contribution plugin site&quot; /&gt;&lt;/p&gt; &lt;p&gt;左上にある&lt;code class=&quot;highlighter-rouge&quot;&gt;+ Add to BitBar&lt;/code&gt;ボタンを押してgithub contributionプラグインをBitBarへ追加します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/share/2020/bitbar/open-bitbar.png&quot; alt=&quot;1日コミットを維持するためBitBarの活用 - open bitbar&quot; /&gt;&lt;/p&gt; &lt;p&gt;プラグイン追加ボタンを押したら上のような画面が確認できます。&lt;code class=&quot;highlighter-rouge&quot;&gt;Open BitBar&lt;/code&gt;を押します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/share/2020/bitbar/install-plugin.png&quot; alt=&quot;1日コミットを維持するためBitBarの活用 - install plugin&quot; /&gt;&lt;/p&gt; &lt;p&gt;そして、プラグインをインストールダイアログが表示されます。&lt;code class=&quot;highlighter-rouge&quot;&gt;Install&lt;/code&gt;ボタンを押して、プラグインをインストールします。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;プラグインソースコード追加&quot;&gt;プラグインソースコード追加&lt;/h2&gt; &lt;p&gt;プラグインへ必要なソースコードを追加する必要があります。上で作ったプラグインフォルダへ移動した後、&lt;code class=&quot;highlighter-rouge&quot;&gt;github-contribution.10m.rb&lt;/code&gt;ファイルを生成します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/share/2020/bitbar/github-contribution-plugin-site.png&quot; alt=&quot;1日コミットを維持するためBitBarの活用 - github contribution plugin site&quot; /&gt;&lt;/p&gt; &lt;p&gt;ファイルを生成したら、プラグインサイトの&lt;code class=&quot;highlighter-rouge&quot;&gt;+ Add to BitBar&lt;/code&gt;横にある&lt;code class=&quot;highlighter-rouge&quot;&gt;View source&lt;/code&gt;リンクをクリックします。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/share/2020/bitbar/github-contribution-plugin-source.png&quot; alt=&quot;1日コミットを維持するためBitBarの活用 - github contribution plugin sourcecode&quot; /&gt;&lt;/p&gt; &lt;p&gt;該当ソースコードをコピーして、上で作った&lt;code class=&quot;highlighter-rouge&quot;&gt;github-contribution.10m.rb&lt;/code&gt;ファイルへペーストします。&lt;/p&gt; &lt;h2 id=&quot;bitbarrc設定&quot;&gt;bitbarrc設定&lt;/h2&gt; &lt;p&gt;インストールが終わったら、Githubのアカウントを設定する必要があります。自分のエディタをで&lt;code class=&quot;highlighter-rouge&quot;&gt;~/.bitbarrc&lt;/code&gt;を開きます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# vscode&lt;/span&gt; code ~/.bitbarrc &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;そして、下記の内容を追加します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;github_contribution] username &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &amp;lt;GITHUB_USERNAME&amp;gt; max_contributions &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 10 &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ここで&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;GITHUB_USERNAME&amp;gt;&lt;/code&gt;を自分のGithubの名前で変更します。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;プラグインの実行&quot;&gt;プラグインの実行&lt;/h2&gt; &lt;p&gt;今までインストールや設定したプラグインを実行してみましょう。Macの右上にあるStatusbarを選択して&lt;code class=&quot;highlighter-rouge&quot;&gt;Refresh all&lt;/code&gt;を選択します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/share/2020/bitbar/bitbar-refresh-all.png&quot; alt=&quot;1日コミットを維持するためBitBarの活用 - bitbar refresh all&quot; /&gt;&lt;/p&gt; &lt;p&gt;そしたら下記のようにBitBarのgithub-contributionが実行されて現在のコミット状態が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/share/2020/bitbar/bitbar-github-contribution.png&quot; alt=&quot;1日コミットを維持するためBitBarの活用 - bitbar github-contributionインストール完了&quot; /&gt;&lt;/p&gt; &lt;p&gt;BitBarのgithub-contributionは10分ことに情報を更新します。&lt;/p&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これで1日コミットを維持するため、BitBarをインストールしてgithub-contributionプラグインを設定してみました。&lt;/p&gt; &lt;p&gt;今から毎回Githubのプロフィールページで確認しなくても1日コミットしたか確認できるようになりました。じゃ、頑張って1日コミットをやってみましょう！&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/share/2020/bitbar/background.jpg"/></entry><entry xml:lang="ja"><title type="html">Fastlaneを使ってアプリのデプロイを自動化する</title><link href="https://dev-yakuza.github.io/react-native/fastlane/" rel="alternate" type="text/html" title="Fastlaneを使ってアプリのデプロイを自動化する"/><published>2020-01-18T00:00:00+09:00</published><updated>2020-01-18T22:42:28+09:00</updated><id>https://dev-yakuza.github.io/react-native/fastlane-ja</id><content type="html" xml:base="https://dev-yakuza.github.io/react-native/fastlane/">&lt;div id=&quot;contents_list&quot;&gt; &lt;h2 id=&quot;section&quot;&gt;目次&lt;/h2&gt; &lt;ol&gt; &lt;li&gt;&lt;a href=&quot;#概要&quot;&gt;概要&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#fastlane&quot;&gt;Fastlane&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#インストール&quot;&gt;インストール&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#ios&quot;&gt;iOS&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#iosのためfastlaneの初期化&quot;&gt;iOSのためFastlaneの初期化&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#ios用fastlaneフォルダやファイル&quot;&gt;iOS用Fastlaneフォルダやファイル&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#ios用実行ファイル修正&quot;&gt;iOS用実行ファイル修正&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#ios用fastlaneを実行&quot;&gt;iOS用fastlaneを実行&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#アンドロイド&quot;&gt;アンドロイド&lt;/a&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;#api-accessのためservice-account生成&quot;&gt;API accessのためService Account生成&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#アンドロイドのためfastlane初期化&quot;&gt;アンドロイドのためFastlane初期化&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#アンドロイド用のfastlaneフォルダやファイル&quot;&gt;アンドロイド用のFastlaneフォルダやファイル&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#アンドロイド用実行ファイル修正&quot;&gt;アンドロイド用実行ファイル修正&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#アンドロイドのfastlane実行&quot;&gt;アンドロイドのfastlane実行&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#packagejson&quot;&gt;package.json&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#gitignore&quot;&gt;gitignore&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;#完了&quot;&gt;完了&lt;/a&gt;&lt;/li&gt; &lt;/ol&gt; &lt;/div&gt; &lt;h2 id=&quot;概要&quot;&gt;概要&lt;/h2&gt; &lt;p&gt;React Nativeを使って趣味でアプリを開発していますが、アプリがどんどん多くなってアプリをアップデートする時、結構な時間が掛かってしまいました。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;趣味で作ったアプリリスト: &lt;a href=&quot;https://dev-yakuza.github.io/app/list&quot; target=&quot;_blank&quot;&gt;App List&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;それでReact Nativeで作ったアプリを自動で配布する方法を探して、&lt;code class=&quot;highlighter-rouge&quot;&gt;Fastlane&lt;/code&gt;と言うツールを見つけました。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;公式サイト: &lt;a href=&quot;https://docs.fastlane.tools/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Fastlane&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;このブログポストは&lt;code class=&quot;highlighter-rouge&quot;&gt;Fastlane&lt;/code&gt;を使ってReact Nativeで開発したアプリのデプロイを自動化する方法について説明します。 (React Nativeで作ったアプリ以外にもネーティブで作ったアプリも使うことができますので、ネーティブで開発した方もご参考してください。)&lt;/p&gt; &lt;p&gt;もしReact Nativeのデプロイについて良く知らない方は以前のブログを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;iOS &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/ios-running-on-device/&quot; target=&quot;_blank&quot;&gt;iOSビルドやテスト&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/ios-test-on-device/&quot; target=&quot;_blank&quot;&gt;iOSデバイステスト&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/ios-enroll-developer-program/&quot; target=&quot;_blank&quot;&gt;iOS開発者登録&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/ios-certification/&quot; target=&quot;_blank&quot;&gt;iOS証明書(Certification)&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/ios-testflight/&quot; target=&quot;_blank&quot;&gt;iOS TestFlight&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/ios-app-store/&quot; target=&quot;_blank&quot;&gt;iOS App store 登録&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt;Android &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/android-test-on-device/&quot; target=&quot;_blank&quot;&gt;アンドロイドデバイステスト&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/android-running-on-device/&quot; target=&quot;_blank&quot;&gt;アンドロイドビルドやテスト&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/android-enroll-google-play-developer/&quot; target=&quot;_blank&quot;&gt;アンドロイド開発者登録&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://dev-yakuza.github.io/react-native/android-google-play/&quot; target=&quot;_blank&quot;&gt;アンドロイドアプリストア登録&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;fastlane&quot;&gt;Fastlane&lt;/h2&gt; &lt;blockquote&gt; &lt;p&gt;fastlane is the easiest way to automate beta deployments and releases for your iOS and Android apps. It handles all tedious tasks, like generating screenshots, dealing with code signing, and releasing your application.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;FastlaneはiOSとアンドロイドのテスト用やリリース用のデプロイを簡単に自動化してくれるツールです。デプロイ以外にも、スクリンショット、コードサイニング、アプリストアーの情報などを生成、管理することもできます。&lt;/p&gt; &lt;p&gt;このブログではスクリンショット、アプリストアー登録情報などは既に登録したと思って、テスト用/リリース用のデプロイを自動化する部分だけ説明する予定です。&lt;/p&gt; &lt;p&gt;スクリンショット、アプリストアー登録情報の生成など、他の機能を使ってみたい方は公式サイトを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;公式サイト: &lt;a href=&quot;https://docs.fastlane.tools/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Fastlane&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;インストール&quot;&gt;インストール&lt;/h2&gt; &lt;p&gt;下記のコマンドで&lt;code class=&quot;highlighter-rouge&quot;&gt;Fastlane&lt;/code&gt;をインストールすることができます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Using RubyGems&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;gem &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;fastlane &lt;span class=&quot;nt&quot;&gt;-NV&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Alternatively using Homebrew&lt;/span&gt; brew cask &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;fastlane &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;公式サイトでは&lt;code class=&quot;highlighter-rouge&quot;&gt;Homebrew&lt;/code&gt;を使ってインストールする方法と&lt;code class=&quot;highlighter-rouge&quot;&gt;RubyGems&lt;/code&gt;を使ってインストールする方法を案内しています。&lt;/p&gt; &lt;p&gt;私は最初はHomebrewを使ってインストールして、テストしましたが、上手く行かない部分がありました。したがって、RubyGemsを使ってインストールすることをおすすめします。もし、Homebrewで上手く行かない方はRubyGemsで再インストールして試してみてください。&lt;/p&gt; &lt;h2 id=&quot;ios&quot;&gt;iOS&lt;/h2&gt; &lt;p&gt;React Nativeで開発したアプリをFastlaneを使ってiOSのデプロイを自動化してみます。&lt;/p&gt; &lt;h3 id=&quot;iosのためfastlaneの初期化&quot;&gt;iOSのためFastlaneの初期化&lt;/h3&gt; &lt;p&gt;下記のコマンドを使ってiOSのため、Fastlaneを初期化します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;ios fastlane init &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のコマンドを実行すると下記の画面が見えます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/init-ios.png&quot; alt=&quot;Fastlaneを使ってReact Nativeアプリ自動配布 - iOSの初期化&quot; /&gt;&lt;/p&gt; &lt;p&gt;基本設定をするためTestflight用のデプロイ設定である&lt;code class=&quot;highlighter-rouge&quot;&gt;2&lt;/code&gt;やアプリストアへのデプロイ設定である&lt;code class=&quot;highlighter-rouge&quot;&gt;3&lt;/code&gt;を選択します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;2. Automate beta distribution to TestFlight 3. Automate App Store distribution &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ここではTestflight用のデプロイ設定である&lt;code class=&quot;highlighter-rouge&quot;&gt;2&lt;/code&gt;を選んで進めます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/select-ios-project.png&quot; alt=&quot;Fastlaneを使ってReact Nativeアプリ自動配布 - iOSのプロジェクト選択&quot; /&gt;&lt;/p&gt; &lt;p&gt;2を選択して進めると上のようにiOSのプロジェクトを選択する画面が確認できます。tvアプリを開発していない場合&lt;code class=&quot;highlighter-rouge&quot;&gt;2&lt;/code&gt;を選択してReact NativeのiOSアプリプロジェクトを選べます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/login-apple.png&quot; alt=&quot;Fastlaneを使ってReact Nativeアプリ自動配布 - Appleログイン&quot; /&gt;&lt;/p&gt; &lt;p&gt;React NativeのiOSプロジェクトを選択したら、上のようにAppleログインをする画面がでます。iOSのアプリ配布のため使ってるApple store connectのログインIDを入力します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/enter-ios.png&quot; alt=&quot;Fastlaneを使ってReact Nativeアプリ自動配布 - iOS設定&quot; /&gt;&lt;/p&gt; &lt;p&gt;私はすでにFastlaneを使ってログインしたことがあるので、上のような画面が確認できます。最初Fastlaneを設定する方は二重認証の手続きが出るので、その手続き通りやってください。&lt;/p&gt; &lt;p&gt;上のような画面以外にも何回も&lt;code class=&quot;highlighter-rouge&quot;&gt;Continue by pressing Enter&lt;/code&gt;を入力する画面がでます。Enterキーを押して進めて設定を完了します。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;ios用fastlaneフォルダやファイル&quot;&gt;iOS用Fastlaneフォルダやファイル&lt;/h3&gt; &lt;p&gt;iOSの設定を完了したらReact Naitveのiosフォルダ下へ下記のようなフォルダやファイルが生成されることが確認できます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;|- fastlane | |- Appfile | |- Fastfile |- Gemfile |- Gemfile.lock &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;各フォルダやファイルを詳しくみてみましょう。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;fastlane フォルダ: fastlaneの設定ファイルや実行ファイルが入っているフォルダ&lt;/li&gt; &lt;li&gt;Gemfile, Gemfile.lock: fastlaneはRubyでできてるのでfastlaneを実行するためのライブラリインストールファイルです。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;fastlanewお実行するための設定内容が入ってる&lt;code class=&quot;highlighter-rouge&quot;&gt;fastlane/Appfile&lt;/code&gt;ファイルのコメントアウトを消して見ると下記のようです。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;app_identifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;io.github.dev-yakuza.kumoncho&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;apple_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;dev.yakuza@gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itc_team_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;119423059&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;team_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;WFDJCJXQZ6&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;AppfileはiOSの自動配布のためfastlaneの設定ファイルです。簡単なファイルですので、詳しく説明は省略します。&lt;/p&gt; &lt;p&gt;その次は実際アプリをデプロイする時、実行するファイルである&lt;code class=&quot;highlighter-rouge&quot;&gt;fastlane/Fastfile&lt;/code&gt;ファイルをコメントアウトを消して見ると下記のようです。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;default_platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:ios&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:ios&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Push a new beta build to TestFlight&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:beta&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;increment_build_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;xcodeproj: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;kumoncho.xcodeproj&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build_app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;workspace: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;kumoncho.xcworkspace&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;scheme: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;kumoncho&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_to_testflight&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;下記のコマンドで上のfastlaneを実行することができます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd ios&lt;/span&gt; fastlane beta &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のようにfastlaneを実行するとiOSのbuild numberを上げて(&lt;code class=&quot;highlighter-rouge&quot;&gt;increment_build_number&lt;/code&gt;)、アプリをビルドして(&lt;code class=&quot;highlighter-rouge&quot;&gt;build_app&lt;/code&gt;)、Testflight用でアップロードします。(&lt;code class=&quot;highlighter-rouge&quot;&gt;upload_to_testflight&lt;/code&gt;)&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;ios用実行ファイル修正&quot;&gt;iOS用実行ファイル修正&lt;/h3&gt; &lt;p&gt;基本でき提供するfastlaneファイルでは完璧に自動化ができません。したがってiOS用のデプロイ自動化のため&lt;code class=&quot;highlighter-rouge&quot;&gt;fastlane/Fastfile&lt;/code&gt;を下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;default_platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:ios&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:ios&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;text: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Enter the version type or specific version&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;(major, minor, patch or 1.0.0): &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/\d+.\d+.\d+/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionNum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;versionNum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;increment_version_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;version_number: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;versionNum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'major'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'minor'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'patch'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;increment_version_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bump_type: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;user_error!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;[ERROR] Wrong version!!!!!!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Push a new beta build to TestFlight&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:beta&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cert&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sigh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;force: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;increment_build_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;xcodeproj: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;kumoncho.xcodeproj&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build_app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;workspace: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;kumoncho.xcworkspace&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;scheme: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;kumoncho&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_to_testflight&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Push a new release build to the App Store&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:release&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cert&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sigh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;force: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;increment_build_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;xcodeproj: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;kumoncho.xcodeproj&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build_app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;workspace: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;kumoncho.xcworkspace&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;scheme: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;kumoncho&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_to_app_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;force: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;reject_if_possible: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_metadata: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_screenshots: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;languages: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'en-US'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ja'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ko'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;release_notes: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;default&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;bug fixed&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;en-US&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;bug fixed&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ja&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;バグ修正&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ko&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;버그 수정&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;submit_for_review: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;automatic_release: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;submission_information: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_uses_idfa: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_serves_ads: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_tracks_install: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_tracks_action: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_limits_tracking: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;export_compliance_encryption_updated: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;追加した内容を見ると下記のようです。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;text: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Enter the version type or specific version&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;(major, minor, patch or 1.0.0): &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/\d+.\d+.\d+/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionNum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;versionNum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;increment_version_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;version_number: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;versionNum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'major'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'minor'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'patch'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;increment_version_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bump_type: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;user_error!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;[ERROR] Wrong version!!!!!!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;ユーザーが入力したバージョンに合わせて、バージョンを修正する関数を定義しました。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:beta&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cert&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sigh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;force: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;fastlaneのコマンドで実行する時、パラメーターを使うため&lt;code class=&quot;highlighter-rouge&quot;&gt;|options|&lt;/code&gt;を追加して、該当optionを新しく定義した関数のパラメーターへ入れました。このように新しく追加したスクリプトを使うためには下記のようなコマンドを実行します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# fastlane beta version:1.0.0&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# fastlane beta version:major&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# fastlane beta version:minor&lt;/span&gt; fastlane beta version:patch &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;もし、パラメーターを入力しなかった場合、ユーザーの入力を待てるようにしました。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;text: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Enter the version type or specific version&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;(major, minor, patch or 1.0.0): &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;また、&lt;code class=&quot;highlighter-rouge&quot;&gt;cert&lt;/code&gt;を使って証明書を持ってくるように設定して、&lt;code class=&quot;highlighter-rouge&quot;&gt;sigh(force: true)&lt;/code&gt;を使ってProvisioning profileと連携するようにしました。&lt;/p&gt; &lt;p&gt;今まではTestflight用でアップロードする方法について説明しました。実際デプロイのため下記のような内容を追加します。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Push a new release build to the App Store&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:release&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cert&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sigh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;force: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;increment_build_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;xcodeproj: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;kumoncho.xcodeproj&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build_app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;workspace: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;kumoncho.xcworkspace&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;scheme: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;kumoncho&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_to_app_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;force: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;reject_if_possible: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_metadata: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_screenshots: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;languages: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'en-US'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ja'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ko'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;release_notes: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;default&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;bug fixed&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;en-US&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;bug fixed&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ja&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;バグ修正&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ko&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;버그 수정&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;submit_for_review: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;automatic_release: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;submission_information: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_uses_idfa: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_serves_ads: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_tracks_install: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_tracks_action: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_limits_tracking: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;export_compliance_encryption_updated: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;アプリをビルドするところまではTestflight用と同じです。ビルドされたアプリをアプリストアーへ配布するために下記のような内容を追加しました。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;upload_to_app_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;force: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;reject_if_possible: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_metadata: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_screenshots: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;languages: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'en-US'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ja'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ko'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;release_notes: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;default&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;bug fixed&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;en-US&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;bug fixed&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ja&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;バグ修正&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ko&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;버그 수정&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;submit_for_review: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;automatic_release: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;submission_information: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_uses_idfa: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_serves_ads: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_tracks_install: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_tracks_action: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;add_id_info_limits_tracking: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;export_compliance_encryption_updated: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;ul&gt; &lt;li&gt;force: fastlaneが生成するHTML reportを生成されないようにします。(true)&lt;/li&gt; &lt;li&gt;reject_if_possible: アプリ審査を待ってるバージョンがある時、その審査をキャンセルします。(true)&lt;/li&gt; &lt;li&gt;skip_metadata: アプリストアの情報を登録するかを設定します。自動配布する時、バージョンの修正内容を作成する必要があるので、この情報を登録できるように設定します。(false)&lt;/li&gt; &lt;li&gt;skip_screenshots: 私は既に配布されたアプリについて自動配布を適用しています。したがって、スクリンショットを再アップロードする必要がありません。(true)&lt;/li&gt; &lt;li&gt;languages: 現在ストアへ登録されたアプリのローカライゼーションを設定します。使える言語は &lt;code class=&quot;highlighter-rouge&quot;&gt;ar-SA, ca, cs, da, de-DE, el, en-AU, en-CA, en-GB, en-US, es-ES, es-MX, fi, fr-CA, fr-FR, he, hi, hr, hu, id, it, ja, ko, ms, nl-NL, no, pl, pt-BR, pt-PT, ro, ru, sk, sv, th, tr, uk, vi, zh-Hans, zh-Hant&lt;/code&gt;で、詳しく内容は公式サイトを参考してください。(&lt;a href=&quot;https://docs.fastlane.tools/actions/upload_to_app_store/#available-language-codes&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;公式サイト&lt;/a&gt;)&lt;/li&gt; &lt;li&gt;release_notes: iOSはアプリを再配布する時、Release notesを必ず作成します。私が使ってるスクリプトは3国語を提供してるアプリなので、defaultと와 3国語に該当するRelease notesを作成しました。&lt;/li&gt; &lt;li&gt;submit_for_review: アプリ審査へ提出するようにします。(true)&lt;/li&gt; &lt;li&gt;automatic_release: 審査が終わったらアプリを自動でデプロイするように設定します。これを設定しないとアプリ審査が終わった後、開発者が手動でデプロイする必要があります。(true)&lt;/li&gt; &lt;li&gt;submission_information: デプロイ前、暗号化や広告が含まれたかをチェックするオプションです。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;これ意外にもたくさんのオプションがあります。詳しく内容は公式サイトを参考してください。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;公式サイト: &lt;a href=&quot;https://docs.fastlane.tools/actions/upload_to_app_store/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;https://docs.fastlane.tools/actions/upload_to_app_store/&lt;/a&gt;&lt;/li&gt; &lt;li&gt;例題: &lt;a href=&quot;https://github.com/artsy/eigen/blob/faa02e2746194d8d7c11899474de9c517435eca4/fastlane/Fastfile#L131-L149&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;submission_information&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;ios用fastlaneを実行&quot;&gt;iOS用fastlaneを実行&lt;/h3&gt; &lt;p&gt;これでfastlaneを使ってiOSへの自動デプロイ準備は終わりました。これからfastlaneを使ってアプリを自動デプロイしてみます。&lt;/p&gt; &lt;p&gt;下記のコマンドを使ってReact Nativeで作ったアプリをTestflightへデプロイしてみます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd ios&lt;/span&gt; fastlane beta version:patch &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;デプロイが終わるまで、結構な時間がかかります。デプロイが終わったら下記のような画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/ios-testflight.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - iOS Testflightデプロイ&quot; /&gt;&lt;/p&gt; &lt;p&gt;もちろん、App store connectのTestflightへも上手くデプロイされたことが確認できます。&lt;/p&gt; &lt;p&gt;じゃ、今回は下記のコマンド使って実際デプロイしてみましょう。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd ios&lt;/span&gt; fastlane release version:patch &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;デプロイが終わったら下記のような画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/ios-upload-app-store.png&quot; alt=&quot;Fastlaneを使ってReact Nativeアプリ自動配布 - iOSアプリデプロイ&quot; /&gt;&lt;/p&gt; &lt;p&gt;また、App store connectにも上手くデプロイが出来たことが確認出来ます。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;アンドロイド&quot;&gt;アンドロイド&lt;/h2&gt; &lt;p&gt;今回はReact Nativeで開発したアンドロイドアプリをFastlaneを使ってアンドロイドのデプロイを自動化してみます。&lt;/p&gt; &lt;h3 id=&quot;api-accessのためservice-account生成&quot;&gt;API accessのためService Account生成&lt;/h3&gt; &lt;p&gt;Fastlaneを使ってアンドロイドをデプロイする時、グーグルのAPIを使うため、&lt;code class=&quot;highlighter-rouge&quot;&gt;Google Developer Service Account&lt;/code&gt;を生成する必要があります。&lt;/p&gt; &lt;p&gt;Google Developer Service Accountを生成するため、下記のリンクを使ってグーグルコンソール(Google Play Console)に行きます。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;グーグルプレイコンソール: &lt;a href=&quot;https://play.google.com/apps/publish/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;https://play.google.com/apps/publish/&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;グーグルプレイコンソールに移動したら、下記の画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/google-play-console.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソール&quot; /&gt;&lt;/p&gt; &lt;p&gt;左メニューの&lt;code class=&quot;highlighter-rouge&quot;&gt;Settings&lt;/code&gt;を選択します。そして&lt;code class=&quot;highlighter-rouge&quot;&gt;Developer account&lt;/code&gt;下にある&lt;code class=&quot;highlighter-rouge&quot;&gt;API access&lt;/code&gt;メニューを選択します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-api-access.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソールapi accessメニュー&quot; /&gt;&lt;/p&gt; &lt;p&gt;上のような画面が見えたら、&lt;code class=&quot;highlighter-rouge&quot;&gt;CREATE NEW PROJECT&lt;/code&gt;ボタンを押して、新しプロジェクトを生成します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-api-access-service-account.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソールapi access, service account&quot; /&gt;&lt;/p&gt; &lt;p&gt;新しプロジェクトが生成されると、上のような画面が確認できます。下にある&lt;code class=&quot;highlighter-rouge&quot;&gt;CREATE SERVICE ACCOUNT&lt;/code&gt;ボタンを選択したら、下記のような画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-api-access-how-to-create-service-account.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソールapi access, how to create service account&quot; /&gt;&lt;/p&gt; &lt;p&gt;上のような画面で&lt;code class=&quot;highlighter-rouge&quot;&gt;Google API Console&lt;/code&gt;リンクを選択します。選択したら、下記のような画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-google-api-console.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - Google API Console&quot; /&gt;&lt;/p&gt; &lt;p&gt;上にある&lt;code class=&quot;highlighter-rouge&quot;&gt;CREATE SERVICE ACCOUNT&lt;/code&gt;ボタンを選択します。選択したら、下記のように新しService accountを生成する画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-google-api-console-create-service-account.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - Google API Console, service account生成&quot; /&gt;&lt;/p&gt; &lt;p&gt;上のような画面で、&lt;code class=&quot;highlighter-rouge&quot;&gt;Service account name&lt;/code&gt;へ名前を入力して、&lt;code class=&quot;highlighter-rouge&quot;&gt;CREATE&lt;/code&gt;ボタンを押してService accountを生成します。(私はService account nameへgoogle-play-fastlane-deploymentを入力しました。)&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-google-api-console-service-account-role.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - Google API Console, service account役割設定&quot; /&gt;&lt;/p&gt; &lt;p&gt;上のような画面が見えたら、&lt;code class=&quot;highlighter-rouge&quot;&gt;Role&lt;/code&gt;を選択して&lt;code class=&quot;highlighter-rouge&quot;&gt;Service Account User&lt;/code&gt;を検索して選択します。RoleにService Account Userを設定したら、下にある&lt;code class=&quot;highlighter-rouge&quot;&gt;CONTINUE&lt;/code&gt;ボタンを押して進めます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-google-api-console-service-account-create-key.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - Google API Console, service accountキー生成&quot; /&gt;&lt;/p&gt; &lt;p&gt;上のような画面が見えたら、下にある&lt;code class=&quot;highlighter-rouge&quot;&gt;CREATE KEY&lt;/code&gt;を選択して&lt;code class=&quot;highlighter-rouge&quot;&gt;JSON&lt;/code&gt;が選択された状態で&lt;code class=&quot;highlighter-rouge&quot;&gt;CREATE&lt;/code&gt;を押してキーを生成します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-google-api-console-service-account-create-json-key.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - Google API Console, service account JSONキー生成&quot; /&gt;&lt;/p&gt; &lt;p&gt;CREATEボタンを押してキーを生成したら、JSON形式のファイルが自動でダウンロードされます。このファイルをReact Nativeプロジェクトの&lt;code class=&quot;highlighter-rouge&quot;&gt;android&lt;/code&gt;フォルダー下にコピーします。最後に&lt;code class=&quot;highlighter-rouge&quot;&gt;DONE&lt;/code&gt;ボタンを押してService Accountを生成します。&lt;/p&gt; &lt;p&gt;そして現在画面へ戻って、右下にある&lt;code class=&quot;highlighter-rouge&quot;&gt;DONE&lt;/code&gt;ボタンを押してService Account生成を終了します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-api-access-how-to-create-service-account.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソールapi access, how to create service account&quot; /&gt;&lt;/p&gt; &lt;p&gt;そしたら以前と違って下記のような画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-finish-to-create-service-account.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソールService Account生成完了&quot; /&gt;&lt;/p&gt; &lt;p&gt;そしたら、権限を設定するため、右下の&lt;code class=&quot;highlighter-rouge&quot;&gt;GRANT ACCESS&lt;/code&gt;ボタンを選択します。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-service-account-grant-access.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - グーグルプレイコンソールService Account権限設定&quot; /&gt;&lt;/p&gt; &lt;p&gt;上の画面が表示されたら、スクロールして&lt;code class=&quot;highlighter-rouge&quot;&gt;ADD USER&lt;/code&gt;を選択してユーザーを登録します。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;アンドロイドのためfastlane初期化&quot;&gt;アンドロイドのためFastlane初期化&lt;/h3&gt; &lt;p&gt;今からアンドロイド用のFastlaneを生成してみましょう。下記のコマンドを使ってアンドロイド用のFastlaneを生成します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;android fastlane init &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;上のコマンドを実行すると下記のような画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-package-name.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - アンドロイド初期化: package name&quot; /&gt;&lt;/p&gt; &lt;p&gt;アンドロイドプロジェクトの&lt;code class=&quot;highlighter-rouge&quot;&gt;Package Name&lt;/code&gt;を入力します。(ex&amp;gt; io.github.dev.yakuza.kumoncho)そしたら、下記のようにJSONファイルのpathを入力する画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-json-path.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - アンドロイド初期化: JSON path&quot; /&gt;&lt;/p&gt; &lt;p&gt;Service Accountを生成した時、ダウンロードしたJSONファイルを&lt;code class=&quot;highlighter-rouge&quot;&gt;android&lt;/code&gt;フォルダーへコピーしました。このファイルのpathを指定します。(ex&amp;gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;app-xxx.json&lt;/code&gt;)&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-download-metadata.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - アンドロイド初期化:ダウンロードmetadata&quot; /&gt;&lt;/p&gt; &lt;p&gt;次はアンドロイドをデプロイする時、登録したストアー情報(metadata)をダウンロードするかどうか設定します。私は既にデプロイしたアプリを自動化してるのでストアー情報を更新する必要がありません。したがって、nを入力してストアー情報をダウンロードしないようにしました。&lt;/p&gt; &lt;p&gt;上のような画面以外にも何回にも&lt;code class=&quot;highlighter-rouge&quot;&gt;Continue by pressing Enter&lt;/code&gt;を入力する画面がでます。Enterキーを押して進めて設定を完了します。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;アンドロイド用のfastlaneフォルダやファイル&quot;&gt;アンドロイド用のFastlaneフォルダやファイル&lt;/h3&gt; &lt;p&gt;アンドロイドの設定を完了したら、React Naitveのandroidフォルダ下へ下記のようなフォルダやファイルが生成されたことが確認できます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;|- fastlane | |- Appfile | |- Fastfile |- Gemfile |- Gemfile.lock &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;各フォルダやファイルを詳しく説明します。&lt;/p&gt; &lt;ul&gt; &lt;li&gt;fastlaneフォルダ: fastlaneの設定や実行するファイルが入ってるフォルダ&lt;/li&gt; &lt;li&gt;Gemfile, Gemfile.lock: fastlaneはRubyでできてるので、fastlaneを実行するためのライブラリのインストールファイルです。&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;fastlaneを実行する設定内容が入ってる&lt;code class=&quot;highlighter-rouge&quot;&gt;fastlane/Appfile&lt;/code&gt;ファイルのコメントアウトを消して見ると下記のようです。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;json_key_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;api-xxx.json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;package_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;io.github.dev.yakuza.kumoncho&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;私たちが設定したPacakge NameとJSONファイルのいちが設定されたことが確認できます。その次、実際アプリをデプロイする時実行されるファイルである&lt;code class=&quot;highlighter-rouge&quot;&gt;fastlane/Fastfile&lt;/code&gt;ファイルのコメントアウトを消して見ると下記のようです。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;default_platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:android&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:android&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Runs all the tests&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:test&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gradle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;task: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;test&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Submit a new Beta Build to Crashlytics Beta&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:beta&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gradle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;task: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;clean assembleRelease&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;crashlytics&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Deploy a new version to the Google Play&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:deploy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gradle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;task: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;clean assembleRelease&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_to_play_store&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;iOSとは違って&lt;code class=&quot;highlighter-rouge&quot;&gt;beta&lt;/code&gt;と&lt;code class=&quot;highlighter-rouge&quot;&gt;deploy&lt;/code&gt;,2つのlaneが生成されることが確認できます。上のFastlaneももちろん下記のコマンドで実行することができます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd android&lt;/span&gt; fastlane beta fastlane deploy &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;しかし、完璧な自動化をするため、Fastfileを修正する必要があります。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;アンドロイド用実行ファイル修正&quot;&gt;アンドロイド用実行ファイル修正&lt;/h3&gt; &lt;p&gt;基本的提供されるfastlaneファイルでは完璧に自動化ができません。したがって、アンドロイド用のデプロイを自動化するため&lt;code class=&quot;highlighter-rouge&quot;&gt;fastlane/Fastfile&lt;/code&gt;ファイルを下記のように修正します。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;default_platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:android&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:android&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;increment_version_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'../app/build.gradle'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/versionCode\s+(\d+)/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionCode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;versionCode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'w'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;close&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;increment_version_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;bump_type: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;version_number: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'../app/build.gradle'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/versionName\s+(&quot;\d+.\d+.\d+&quot;)/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;gsub!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'&quot;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;major&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bump_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'major'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;major&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bump_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'minor'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bump_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'patch'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version_number&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;major&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minor&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'w'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;close&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;increment_version_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;text: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Enter the version type or specific version&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;(major, minor, patch or 1.0.0): &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/\d+.\d+.\d+/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionNum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;versionNum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;increment_version_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;version_number: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;versionNum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'major'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'minor'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'patch'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;increment_version_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bump_type: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;user_error!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;[ERROR] Wrong version!!!!!!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Submit a new Beta Build to Crashlytics Beta&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:beta&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gradle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;task: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;clean bundleRelease&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_to_play_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_metadata: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_changelogs: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_screenshots: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_images: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_apk: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;track: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'internal'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Deploy a new version to the Google Play&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:release&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gradle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;task: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;clean bundleRelease&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_to_play_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_metadata: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_changelogs: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_screenshots: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_images: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_apk: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;追加した内容を詳しく見ると下記のようです。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;increment_version_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'../app/build.gradle'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/versionCode\s+(\d+)/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionCode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;versionCode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'w'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;close&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;increment_version_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;bump_type: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;version_number: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'../app/build.gradle'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/versionName\s+(&quot;\d+.\d+.\d+&quot;)/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;gsub!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'&quot;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;major&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versionName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bump_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'major'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;major&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bump_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'minor'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;minor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bump_type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'patch'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version_number&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;major&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minor&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;patch&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'w'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;close&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;increment_version_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;アンドロイドはiOSと違ってアプリのバージョンをアップデートする機能が提供されていません。(私が探せなかったかも知れないです。もし、分かる方はフィドバックお願いします。)したがって、アンドロイドのversionCodeとversionNameをアップデートする機能を実装しました。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;updateバージョンの部分はiOSで説明したので省略します。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:beta&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gradle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;task: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;clean bundleRelease&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_to_play_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_metadata: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_changelogs: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_screenshots: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_images: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_apk: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;track: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'internal'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;アンドロイドはgradleのcleanとbundleReleaseでアプリをビルドするようにしました。(&lt;code class=&quot;highlighter-rouge&quot;&gt;assembleRelease&lt;/code&gt;ではありません。)また、upload_to_play_storeの&lt;code class=&quot;highlighter-rouge&quot;&gt;track: 'internal'&lt;/code&gt;を使ってinternal test用でデプロイするようにしました。&lt;/p&gt; &lt;p&gt;アンドロイドはiOSとは違ってRelease notes(change log)を作成する必要がありません。だから、ストアーと関係ある全ての機能はskipするように設定しました。&lt;/p&gt; &lt;p&gt;最後にbundleReleaseをを使ってaabファイルを生成してアップロードする予定なので、skip_upload_apkをtrueで設定しました。&lt;/p&gt; &lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Deploy a new version to the Google Play&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:release&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;updateVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gradle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;task: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;clean bundleRelease&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upload_to_play_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_metadata: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_changelogs: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_screenshots: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_images: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;skip_upload_apk: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;グーグルプレイにデプロイするスクリプトです。iOSと同じようにするため&lt;code class=&quot;highlighter-rouge&quot;&gt;lane :deploy&lt;/code&gt;を&lt;code class=&quot;highlighter-rouge&quot;&gt;lane :release&lt;/code&gt;で変更しました。&lt;/p&gt; &lt;p&gt;upload_to_play_storeのtrackパレメーターが無いこと以外はbeta用と同じなので詳しく説明は省略します。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h3 id=&quot;アンドロイドのfastlane実行&quot;&gt;アンドロイドのfastlane実行&lt;/h3&gt; &lt;p&gt;fastlaneを使ってアンドロイドを自動デプロイする準備が終わりました。今からfastlaneを使ってアプリを自動デプロイしてみます。&lt;/p&gt; &lt;p&gt;下記のコマンドを使ってReact Nativeで作成したアプリをinternal testへデプロイしてみます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd android&lt;/span&gt; fastlane beta version:patch &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;デプロイが終わるまで、結構な時間がかかります。デプロイが終わったら下記のような画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-fastlane-beta.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - アンドロイドinternal testデプロイ&quot; /&gt;&lt;/p&gt; &lt;p&gt;もちろんPlay store consoleでもinternal testへ上手くデプロイされたことが確認できます。&lt;/p&gt; &lt;p&gt;じゃ、今から下記のコマンドを使って実際デプロイをやってみます。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# cd android&lt;/span&gt; fastlane release version:patch &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;デプロイが完了されたら、下記のような画面が確認できます。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;/assets/images/category/react-native/2020/fastlane/android-fastlane-release.png&quot; alt=&quot;Fastlaneを使ってReact Nativeのアプリを自動配布 - アンドロイドアプリストアーデプロイ&quot; /&gt;&lt;/p&gt; &lt;p&gt;また、グーグルプレイストアにも上手くデプロイされたことが確認できます。&lt;/p&gt; &lt;div class=&quot;in-feed-ads&quot;&gt; &lt;script async=&quot;&quot; src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt; &lt;ins class=&quot;adsbygoogle&quot; style=&quot;display:block; text-align:center;&quot; data-ad-layout=&quot;in-article&quot; data-ad-format=&quot;fluid&quot; data-ad-client=&quot;ca-pub-7987914246691031&quot; data-ad-slot=&quot;2718813593&quot;&gt;&lt;/ins&gt; &lt;script&gt; (adsbygoogle = window.adsbygoogle || []).push({}); &lt;/script&gt; &lt;/div&gt; &lt;h2 id=&quot;packagejson&quot;&gt;package.json&lt;/h2&gt; &lt;p&gt;私はこのように作ったfastlaneを実行するコマンドを下記のようにpackage.jsonへ作成して使っています。&lt;/p&gt; &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nl&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;beta:android&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;npm run prebuild-android &amp;amp;&amp;amp; cd ./android &amp;amp;&amp;amp; bundle exec fastlane beta version:patch&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;beta:ios&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cd ./ios &amp;amp;&amp;amp; bundle exec fastlane beta version:patch&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;beta&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;npm run beta:android &amp;amp;&amp;amp; npm run beta:ios&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;release:android&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;npm run prebuild-android &amp;amp;&amp;amp; cd ./android &amp;amp;&amp;amp; bundle exec fastlane release version:patch&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;release:ios&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cd ./ios &amp;amp;&amp;amp; bundle exec fastlane release version:patch&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;release&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;npm run release:android &amp;amp;&amp;amp; npm run release:ios&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;gitignore&quot;&gt;gitignore&lt;/h2&gt; &lt;p&gt;fastlaneを使ってデプロイすると、それによるファイルだちが生成されます。gitで管理しないようにするため&lt;code class=&quot;highlighter-rouge&quot;&gt;.gitignore&lt;/code&gt;ファイルへ下記の内容を追加します。&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;... &lt;span class=&quot;c&quot;&gt;# fastlane&lt;/span&gt; ios/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.mobileprovision ios/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.cer ios/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.dSYM.zip android/fastlane/README.md ios/fastlane/README.md &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h2 id=&quot;完了&quot;&gt;完了&lt;/h2&gt; &lt;p&gt;これでfastlaneを使ってReact Nativeを作成したアプリを自動デプロイする方法についてみてみました。このブログで説明した内容はもちろんNativeで開発したアプリでも活用できるので、たくさんの方にやくにたてらいいかと思います。&lt;/p&gt; &lt;p&gt;このfastlaneを導入して時間を節約できたし、楽になって嬉しいです。皆さんもぜひ使ってみてください。&lt;/p&gt;</content><author><name>dev.yakuza@gmail.com</name></author><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://dev-yakuza.github.io/assets/images/category/react-native/2020/fastlane/background.jpg"/></entry></feed>